import{a as m,f as g}from"../chunks/D_ansCh4.js";import{o as Ra}from"../chunks/YuJsNucz.js";import{p as Ya,a as Ga,e as Qa,s as i,c as e,A as o,$ as Za,y as s,r as a,av as w,t as k,n as X}from"../chunks/Cl0DMWZv.js";import{d as ae,s as v,a as ga,e as ee}from"../chunks/Cv63ugJo.js";import{i as $,a as qa,g as se}from"../chunks/BTM6jyxq.js";import{e as te,i as ie}from"../chunks/CXL-JkK8.js";import{h as re}from"../chunks/avLAz_gZ.js";import{r as ua}from"../chunks/j3NwBB6B.js";import{s as pa}from"../chunks/D9jd4Gan.js";import{s as fa}from"../chunks/BTB6Rw-c.js";import{b as _a}from"../chunks/DQcjtaIM.js";import{b as le}from"../chunks/CXtqpSC3.js";import{s as ne,a as oe}from"../chunks/BF7g9if2.js";import{g as ve}from"../chunks/eE_TcHx0.js";import{g as de}from"../chunks/CYvOnIj9.js";var ce=g('<div class="error-message svelte-maq4gq"> </div>'),me=g('<div class="success-message svelte-maq4gq"> </div>'),ge=g('<button class="btn-edit svelte-maq4gq">Edit Profile</button>'),qe=g('<option class="svelte-maq4gq"> </option>'),ue=g('<form class="edit-form svelte-maq4gq"><div class="form-group svelte-maq4gq"><label for="editName" class="svelte-maq4gq">Full Name</label> <input id="editName" type="text" placeholder="Enter your name" class="svelte-maq4gq"/></div> <div class="form-group svelte-maq4gq"><label for="editPhone" class="svelte-maq4gq">Phone Number</label> <div class="phone-input-group svelte-maq4gq"><select id="editCountryCode" class="country-code-select svelte-maq4gq"></select> <input id="editPhone" type="tel" placeholder="9XX XXX XXXX" class="phone-input svelte-maq4gq"/></div></div> <div class="form-group readonly svelte-maq4gq"><label class="svelte-maq4gq">Email Address</label> <div class="readonly-value svelte-maq4gq"> </div> <span class="readonly-hint svelte-maq4gq">Email cannot be changed</span></div> <div class="form-actions svelte-maq4gq"><button type="button" class="btn-cancel svelte-maq4gq">Cancel</button> <button type="submit" class="btn-save svelte-maq4gq"> </button></div></form>'),pe=g('<div class="info-grid svelte-maq4gq"><div class="info-item svelte-maq4gq"><span class="info-label svelte-maq4gq">Name:</span> <span class="info-value svelte-maq4gq"> </span></div> <div class="info-item svelte-maq4gq"><span class="info-label svelte-maq4gq">Email:</span> <span class="info-value svelte-maq4gq"> </span></div> <div class="info-item svelte-maq4gq"><span class="info-label svelte-maq4gq">Phone:</span> <span class="info-value svelte-maq4gq"> </span></div> <div class="info-item svelte-maq4gq"><span class="info-label svelte-maq4gq">Currency:</span> <span class="info-value svelte-maq4gq"> </span></div> <div class="info-item svelte-maq4gq"><span class="info-label svelte-maq4gq">Role:</span> <span class="info-value capitalize svelte-maq4gq"> </span></div></div>'),fe=g('<div class="loading-state svelte-maq4gq"><div class="spinner svelte-maq4gq"></div> <p class="svelte-maq4gq">Loading your limits...</p></div>'),_e=g('<strong class="text-danger svelte-maq4gq">Limit reached!</strong> Wait for your auctions to end before bidding on new items.',1),be=g('<strong class="text-warning svelte-maq4gq"> </strong>'),ye=g(`<strong class="text-danger svelte-maq4gq">Limit reached!</strong> To list more, you'll need to add a deposit (coming soon).`,1),he=g('<strong class="text-warning svelte-maq4gq"> </strong>'),xe=g('<a href="/sell" class="btn-primary svelte-maq4gq">Create New Listing</a>'),Pe=g('<button class="btn-disabled svelte-maq4gq" disabled="">Limit Reached</button>'),Ne=g(`<div class="limits-section svelte-maq4gq"><h2 class="section-title svelte-maq4gq">Activity Limits</h2> <p class="section-description svelte-maq4gq">Track your usage of bidding and posting features</p> <div class="limits-grid svelte-maq4gq"><div class="limit-card svelte-maq4gq"><div class="card-header svelte-maq4gq"><span class="icon svelte-maq4gq">üî®</span> <h3 class="svelte-maq4gq">Bidding Limit</h3></div> <div class="limit-content svelte-maq4gq"><div class="limit-stats svelte-maq4gq"><div class="stat-large svelte-maq4gq"><span class="stat-number svelte-maq4gq"> </span> <span class="stat-label svelte-maq4gq"> </span></div> <div><span class="remaining-number svelte-maq4gq"> </span> <span class="remaining-label svelte-maq4gq">remaining</span></div></div> <div class="progress-bar svelte-maq4gq"><div class="progress-fill svelte-maq4gq"></div></div> <p class="limit-description svelte-maq4gq"> <!></p> <div class="card-footer svelte-maq4gq"><a href="/products?status=my-bids" class="btn-secondary svelte-maq4gq">View My Bids</a></div></div></div> <div class="limit-card svelte-maq4gq"><div class="card-header svelte-maq4gq"><span class="icon svelte-maq4gq">üìù</span> <h3 class="svelte-maq4gq">Posting Limit</h3></div> <div class="limit-content svelte-maq4gq"><div class="limit-stats svelte-maq4gq"><div class="stat-large svelte-maq4gq"><span class="stat-number svelte-maq4gq"> </span> <span class="stat-label svelte-maq4gq"> </span></div> <div><span class="remaining-number svelte-maq4gq"> </span> <span class="remaining-label svelte-maq4gq">remaining</span></div></div> <div class="progress-bar svelte-maq4gq"><div class="progress-fill posts svelte-maq4gq"></div></div> <p class="limit-description svelte-maq4gq"> <!></p> <div class="card-footer svelte-maq4gq"><!> <a href="/dashboard" class="btn-secondary svelte-maq4gq">View My Products</a></div></div></div></div> <div class="info-banner svelte-maq4gq"><span class="info-icon svelte-maq4gq">‚ÑπÔ∏è</span> <div class="info-text svelte-maq4gq"><strong class="svelte-maq4gq">Coming Soon:</strong> Deposit system to unlock unlimited bidding and posting capabilities.
          With a refundable deposit, you'll be able to bid on unlimited products and list unlimited items!</div></div></div>`),Ce=g('<div class="error-state svelte-maq4gq"><p class="svelte-maq4gq">Unable to load your limits. Please try again later.</p></div>'),we=g('<div class="profile-page svelte-maq4gq"><div class="profile-header svelte-maq4gq"><h1 class="svelte-maq4gq">My Profile</h1> <p class="subtitle svelte-maq4gq">View and edit your account information</p></div> <!> <!> <div class="info-card svelte-maq4gq"><div class="card-header svelte-maq4gq"><div class="header-left svelte-maq4gq"><span class="icon svelte-maq4gq">üë§</span> <h2 class="svelte-maq4gq">Account Information</h2></div> <!></div> <!></div> <!></div>');function Be(ba,ya){Ya(ya,!0);const f=()=>oe(qa,"$authStore",ha),[ha,xa]=ne();let l=w(null),ea=w(!0),V=w(!1),A=w(!1),T=w(""),j=w(""),U=w(""),B=w("+63"),J=w("");const Pa=[{code:"+63",country:"Philippines",flag:"üáµüá≠"},{code:"+1",country:"USA/Canada",flag:"üá∫üá∏"},{code:"+44",country:"UK",flag:"üá¨üáß"},{code:"+61",country:"Australia",flag:"üá¶üá∫"},{code:"+65",country:"Singapore",flag:"üá∏üá¨"},{code:"+81",country:"Japan",flag:"üáØüáµ"},{code:"+82",country:"South Korea",flag:"üá∞üá∑"},{code:"+86",country:"China",flag:"üá®üá≥"},{code:"+91",country:"India",flag:"üáÆüá≥"},{code:"+60",country:"Malaysia",flag:"üá≤üáæ"},{code:"+66",country:"Thailand",flag:"üáπüá≠"},{code:"+84",country:"Vietnam",flag:"üáªüá≥"},{code:"+62",country:"Indonesia",flag:"üáÆüá©"},{code:"+49",country:"Germany",flag:"üá©üá™"},{code:"+33",country:"France",flag:"üá´üá∑"},{code:"+39",country:"Italy",flag:"üáÆüáπ"},{code:"+34",country:"Spain",flag:"üá™üá∏"},{code:"+971",country:"UAE",flag:"üá¶üá™"},{code:"+966",country:"Saudi Arabia",flag:"üá∏üá¶"},{code:"+974",country:"Qatar",flag:"üá∂üá¶"}];Ra(async()=>{if(!f().isAuthenticated){ve("/login?redirect=/profile");return}sa(),o(l,await de(),!0),o(ea,!1)});function sa(){const t=f().user;t&&(o(U,t.name||"",!0),o(B,t.countryCode||"+63",!0),o(J,t.phoneNumber||"",!0))}function Na(){sa(),o(V,!0),o(T,""),o(j,"")}function Ca(){o(V,!1),o(T,"")}async function wa(){if(o(T,""),o(j,""),!s(U).trim()){o(T,"Name is required");return}o(A,!0);try{const t=se(),r=await fetch("/api/bridge/users/me",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`JWT ${t}`},body:JSON.stringify({name:s(U).trim(),countryCode:s(B),phoneNumber:s(J).replace(/\D/g,"")})});if(!r.ok){const u=await r.json();throw new Error(u.error||"Failed to update profile")}const q=await r.json();qa.set({...f(),user:{...f().user,name:s(U).trim(),countryCode:s(B),phoneNumber:s(J).replace(/\D/g,"")}}),o(j,"Profile updated successfully!"),o(V,!1)}catch(t){o(T,t.message||"Failed to update profile",!0)}finally{o(A,!1)}}function Aa(t,r){return r?`${t} ${r}`:"Not set"}function ta(t,r){return t/r*100}var W=we();re("maq4gq",t=>{Qa(()=>{Za.title="Profile - BidMo.to"})});var ia=i(e(W),2);{var Sa=t=>{var r=ce(),q=e(r,!0);a(r),k(()=>v(q,s(T))),m(t,r)};$(ia,t=>{s(T)&&t(Sa)})}var ra=i(ia,2);{var Ea=t=>{var r=me(),q=e(r,!0);a(r),k(()=>v(q,s(j))),m(t,r)};$(ra,t=>{s(j)&&t(Ea)})}var z=i(ra,2),H=e(z),La=i(e(H),2);{var ka=t=>{var r=ge();ga("click",r,Na),m(t,r)};$(La,t=>{s(V)||t(ka)})}a(H);var Xa=i(H,2);{var $a=t=>{var r=ue(),q=e(r),u=i(e(q),2);ua(u),a(q);var S=i(q,2),b=i(e(S),2),p=e(b);te(p,21,()=>Pa,ie,(d,D)=>{let _=()=>s(D).code,h=()=>s(D).flag;var x=qe(),I=e(x);a(x);var M={};k(()=>{v(I,`${h()??""} ${_()??""}`),M!==(M=_())&&(x.value=(x.__value=_())??"")}),m(d,x)}),a(p);var P=i(p,2);ua(P),a(b),a(S);var N=i(S,2),E=i(e(N),2),O=e(E,!0);a(E),X(2),a(N);var y=i(N,2),C=e(y),L=i(C,2),F=e(L,!0);a(L),a(y),a(r),k(()=>{var d;u.disabled=s(A),p.disabled=s(A),P.disabled=s(A),v(O,((d=f().user)==null?void 0:d.email)||"N/A"),C.disabled=s(A),L.disabled=s(A),v(F,s(A)?"Saving...":"Save Changes")}),ee("submit",r,d=>{d.preventDefault(),wa()}),_a(u,()=>s(U),d=>o(U,d)),le(p,()=>s(B),d=>o(B,d)),_a(P,()=>s(J),d=>o(J,d)),ga("click",C,Ca),m(t,r)},Ta=t=>{var r=pe(),q=e(r),u=i(e(q),2),S=e(u,!0);a(u),a(q);var b=i(q,2),p=i(e(b),2),P=e(p,!0);a(p),a(b);var N=i(b,2),E=i(e(N),2),O=e(E,!0);a(E),a(N);var y=i(N,2),C=i(e(y),2),L=e(C,!0);a(C),a(y);var F=i(y,2),d=i(e(F),2),D=e(d,!0);a(d),a(F),a(r),k(_=>{var h,x,I,M;v(S,((h=f().user)==null?void 0:h.name)||"N/A"),v(P,((x=f().user)==null?void 0:x.email)||"N/A"),v(O,_),v(L,((I=f().user)==null?void 0:I.currency)||"PHP"),v(D,((M=f().user)==null?void 0:M.role)||"buyer")},[()=>{var _,h;return Aa(((_=f().user)==null?void 0:_.countryCode)||"+63",((h=f().user)==null?void 0:h.phoneNumber)||"")}]),m(t,r)};$(Xa,t=>{s(V)?t($a):t(Ta,!1)})}a(z);var Ma=i(z,2);{var Ua=t=>{var r=fe();m(t,r)},Fa=t=>{var r=Ne(),q=i(e(r),4),u=e(q),S=i(e(u),2),b=e(S),p=e(b),P=e(p),N=e(P,!0);a(P);var E=i(P,2),O=e(E);a(E),a(p);var y=i(p,2);let C;var L=e(y),F=e(L,!0);a(L),X(2),a(y),a(b);var d=i(b,2),D=e(d);a(d);var _=i(d,2),h=e(_),x=i(h);{var I=n=>{var c=_e();X(),m(n,c)},M=n=>{var c=be(),aa=e(c);a(c),k(()=>v(aa,`Only ${s(l).bids.remaining??""} slot left!`)),m(n,c)};$(x,n=>{s(l).bids.remaining===0?n(I):s(l).bids.remaining===1&&n(M,1)})}a(_),X(2),a(S),a(u);var la=i(u,2),na=i(e(la),2),K=e(na),R=e(K),Y=e(R),Ia=e(Y,!0);a(Y);var oa=i(Y,2),Va=e(oa);a(oa),a(R);var G=i(R,2);let va;var da=e(G),ja=e(da,!0);a(da),X(2),a(G),a(K);var Q=i(K,2),Ba=e(Q);a(Q);var Z=i(Q,2),ca=e(Z),Ja=i(ca);{var Oa=n=>{var c=ye();X(),m(n,c)},Wa=n=>{var c=he(),aa=e(c);a(c),k(()=>v(aa,`Only ${s(l).posts.remaining??""} slot left!`)),m(n,c)};$(Ja,n=>{s(l).posts.remaining===0?n(Oa):s(l).posts.remaining===1&&n(Wa,1)})}a(Z);var ma=i(Z,2),za=e(ma);{var Ha=n=>{var c=xe();m(n,c)},Ka=n=>{var c=Pe();m(n,c)};$(za,n=>{s(l).posts.remaining>0?n(Ha):n(Ka,!1)})}X(2),a(ma),a(na),a(la),a(q),X(2),a(r),k((n,c)=>{v(N,s(l).bids.current),v(O,`of ${s(l).bids.max??""}`),C=pa(y,1,"stat-remaining svelte-maq4gq",null,C,{warning:s(l).bids.remaining===1,danger:s(l).bids.remaining===0}),v(F,s(l).bids.remaining),fa(D,`width: ${n??""}%`),v(h,`You can bid on up to ${s(l).bids.max??""} different products at a time. `),v(Ia,s(l).posts.current),v(Va,`of ${s(l).posts.max??""}`),va=pa(G,1,"stat-remaining svelte-maq4gq",null,va,{warning:s(l).posts.remaining===1,danger:s(l).posts.remaining===0}),v(ja,s(l).posts.remaining),fa(Ba,`width: ${c??""}%`),v(ca,`You can list up to ${s(l).posts.max??""} products for free. `)},[()=>ta(s(l).bids.current,s(l).bids.max),()=>ta(s(l).posts.current,s(l).posts.max)]),m(t,r)},Da=t=>{var r=Ce();m(t,r)};$(Ma,t=>{s(ea)?t(Ua):s(l)?t(Fa,1):t(Da,!1)})}a(W),m(ba,W),Ga(),xa()}ae(["click"]);export{Be as component};
