import{a as C,f as k}from"../chunks/D_ansCh4.js";import{p as le,t as E,y as e,a as ie,e as ne,s as t,c as o,A as s,av as f,$ as ce,r,n as de}from"../chunks/Cl0DMWZv.js";import{e as fe,s as B}from"../chunks/Cv63ugJo.js";import{i as V,a as ue}from"../chunks/BTM6jyxq.js";import{e as ve,i as ge}from"../chunks/CXL-JkK8.js";import{h as pe}from"../chunks/avLAz_gZ.js";import{s as he,r as b}from"../chunks/j3NwBB6B.js";import{b as _}from"../chunks/DQcjtaIM.js";import{b as me}from"../chunks/CXtqpSC3.js";import{g as ye}from"../chunks/eE_TcHx0.js";import{p as be}from"../chunks/DbvR7NoS.js";import{T as _e}from"../chunks/Cf8ZiYuD.js";var we=k('<div class="success-message svelte-52fghe">Account created successfully! Logging you in...</div>'),Pe=k('<div class="error-message svelte-52fghe"> </div>'),Se=k("<option> </option>"),Ae=k('<div class="register-page svelte-52fghe" style="position: relative; overflow: hidden;"><!> <div class="register-container svelte-52fghe" style="position: relative; z-index: 1;"><h1 class="svelte-52fghe">Create Account</h1> <p class="subtitle svelte-52fghe">Join our marketplace to buy and sell products</p> <!> <!> <form><div class="form-group svelte-52fghe"><label for="name" class="svelte-52fghe">Full Name</label> <input id="name" type="text" placeholder="John Doe" required="" class="svelte-52fghe"/></div> <div class="form-group svelte-52fghe"><label for="email" class="svelte-52fghe">Email Address</label> <input id="email" type="email" placeholder="your@email.com" required="" class="svelte-52fghe"/></div> <div class="form-group svelte-52fghe"><label for="phone" class="svelte-52fghe">Phone Number</label> <div class="phone-input-group svelte-52fghe"><select id="countryCode" class="country-code-select svelte-52fghe"></select> <input id="phone" type="tel" placeholder="9XX XXX XXXX" required="" class="phone-input svelte-52fghe"/></div></div> <div class="form-group svelte-52fghe"><label for="password" class="svelte-52fghe">Password</label> <input id="password" type="password" placeholder="Enter a strong password (min 6 characters)" required="" class="svelte-52fghe"/></div> <div class="form-group svelte-52fghe"><label for="confirmPassword" class="svelte-52fghe">Confirm Password</label> <input id="confirmPassword" type="password" placeholder="Re-enter your password" required="" class="svelte-52fghe"/></div> <button type="submit" class="svelte-52fghe"> </button></form> <div class="additional-info svelte-52fghe"><p class="svelte-52fghe">Already have an account? <a class="svelte-52fghe">Login here</a></p> <div class="features svelte-52fghe"><h3 class="svelte-52fghe">Why join?</h3> <ul class="svelte-52fghe"><li class="svelte-52fghe">âœ“ Sell your products to a global audience</li> <li class="svelte-52fghe">âœ“ Bid on unique items from sellers worldwide</li> <li class="svelte-52fghe">âœ“ Track your bids and listings in one place</li> <li class="svelte-52fghe">âœ“ Secure transactions and buyer protection</li></ul></div></div></div></div>');function Ue(H,Y){le(Y,!0);let w=f(""),h=f(""),g=f(""),P=f(""),x=f("+63"),m=f(""),i=f(!1),u=f(""),n=f(!1);const Z=[{code:"+63",country:"Philippines",flag:"ğŸ‡µğŸ‡­"},{code:"+1",country:"USA/Canada",flag:"ğŸ‡ºğŸ‡¸"},{code:"+44",country:"UK",flag:"ğŸ‡¬ğŸ‡§"},{code:"+61",country:"Australia",flag:"ğŸ‡¦ğŸ‡º"},{code:"+65",country:"Singapore",flag:"ğŸ‡¸ğŸ‡¬"},{code:"+81",country:"Japan",flag:"ğŸ‡¯ğŸ‡µ"},{code:"+82",country:"South Korea",flag:"ğŸ‡°ğŸ‡·"},{code:"+86",country:"China",flag:"ğŸ‡¨ğŸ‡³"},{code:"+91",country:"India",flag:"ğŸ‡®ğŸ‡³"},{code:"+60",country:"Malaysia",flag:"ğŸ‡²ğŸ‡¾"},{code:"+66",country:"Thailand",flag:"ğŸ‡¹ğŸ‡­"},{code:"+84",country:"Vietnam",flag:"ğŸ‡»ğŸ‡³"},{code:"+62",country:"Indonesia",flag:"ğŸ‡®ğŸ‡©"},{code:"+49",country:"Germany",flag:"ğŸ‡©ğŸ‡ª"},{code:"+33",country:"France",flag:"ğŸ‡«ğŸ‡·"},{code:"+39",country:"Italy",flag:"ğŸ‡®ğŸ‡¹"},{code:"+34",country:"Spain",flag:"ğŸ‡ªğŸ‡¸"},{code:"+971",country:"UAE",flag:"ğŸ‡¦ğŸ‡ª"},{code:"+966",country:"Saudi Arabia",flag:"ğŸ‡¸ğŸ‡¦"},{code:"+974",country:"Qatar",flag:"ğŸ‡¶ğŸ‡¦"}];function ee(a){return a&&a.startsWith("/")&&!a.startsWith("//")?a:"/"}const W=ee(be.url.searchParams.get("redirect"));async function ae(a){var v,A;if(a.preventDefault(),s(u,""),s(n,!1),!e(w)||!e(h)||!e(g)||!e(P)||!e(m)){s(u,"Please fill in all fields");return}if(e(g)!==e(P)){s(u,"Passwords do not match");return}if(e(g).length<6){s(u,"Password must be at least 6 characters");return}const l=e(m).replace(/\D/g,"");if(l.length<7||l.length>15){s(u,"Please enter a valid phone number");return}s(i,!0);try{const c=await fetch("/api/bridge/users/register",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:e(w),email:e(h),password:e(g),countryCode:e(x),phoneNumber:e(m).replace(/\D/g,""),role:"seller"})});if(!c.ok){const p=await c.json();throw new Error(((A=(v=p.errors)==null?void 0:v[0])==null?void 0:A.message)||"Registration failed")}s(n,!0),setTimeout(async()=>{const p=await fetch("/api/bridge/users/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e(h),password:e(g)})});if(p.ok){const d=await p.json();d.token&&localStorage.setItem("auth_token",d.token),d.user&&localStorage.setItem("user_data",JSON.stringify(d.user)),ue.set({isAuthenticated:!0,user:d.user,token:d.token}),ye(W)}},1500)}catch(c){s(u,c.message||"Registration failed. Please try again.",!0)}finally{s(i,!1)}}var T=Ae();pe("52fghe",a=>{ne(()=>{ce.title="Register - BidMo.to"})});var F=o(T);_e(F,{});var K=t(F,2),L=t(o(K),4);{var te=a=>{var l=we();C(a,l)};V(L,a=>{e(n)&&a(te)})}var M=t(L,2);{var se=a=>{var l=Pe(),v=o(l,!0);r(l),E(()=>B(v,e(u))),C(a,l)};V(M,a=>{e(u)&&a(se)})}var S=t(M,2),X=o(S),R=t(o(X),2);b(R),r(X);var N=t(X,2),q=t(o(N),2);b(q),r(N);var I=t(N,2),z=t(o(I),2),y=o(z);ve(y,21,()=>Z,ge,(a,l)=>{let v=()=>e(l).code,A=()=>e(l).flag;var c=Se(),p=o(c);r(c);var d={};E(()=>{B(p,`${A()??""} ${v()??""}`),d!==(d=v())&&(c.value=(c.__value=v())??"")}),C(a,c)}),r(y);var J=t(y,2);b(J),r(z),r(I);var j=t(I,2),O=t(o(j),2);b(O),r(j);var U=t(j,2),$=t(o(U),2);b($),r(U);var D=t(U,2),re=o(D,!0);r(D),r(S);var G=t(S,2),Q=o(G),oe=t(o(Q));r(Q),de(2),r(G),r(K),r(T),E(a=>{R.disabled=e(i)||e(n),q.disabled=e(i)||e(n),y.disabled=e(i)||e(n),J.disabled=e(i)||e(n),O.disabled=e(i)||e(n),$.disabled=e(i)||e(n),D.disabled=e(i)||e(n),B(re,e(i)?"Creating Account...":"Create Account"),he(oe,"href",`/login?redirect=${a??""}`)},[()=>encodeURIComponent(W)]),fe("submit",S,ae),_(R,()=>e(w),a=>s(w,a)),_(q,()=>e(h),a=>s(h,a)),me(y,()=>e(x),a=>s(x,a)),_(J,()=>e(m),a=>s(m,a)),_(O,()=>e(g),a=>s(g,a)),_($,()=>e(P),a=>s(P,a)),C(H,T),ie()}export{Ue as component};
