import{e as fa}from"../chunks/pfMRWl6z.js";import{e as ga,h as sa,i as ha,j as Pa}from"../chunks/CYvOnIj9.js";import{a as l,f as i}from"../chunks/D_ansCh4.js";import{p as Sa,t as b,a as Ua,aF as Ra,s,y as a,A as va,c as t,av as Aa,$ as Fa,r as e,n as E,aE as H,f as Me}from"../chunks/Cl0DMWZv.js";import{d as Ba,a as ra,s as d}from"../chunks/Cv63ugJo.js";import{i as y}from"../chunks/BTM6jyxq.js";import{e as ye,i as pe}from"../chunks/CXL-JkK8.js";import{h as ka}from"../chunks/avLAz_gZ.js";import{s as U}from"../chunks/j3NwBB6B.js";import{s as la}from"../chunks/D9jd4Gan.js";import{S as se}from"../chunks/CsWrsq56.js";const ja=async({params:$,fetch:x})=>{const W=await ga($.id);if(!W)throw fa(404,"User not found");const[q,ee,ve]=await Promise.all([sa($.id,{status:"available",active:!0,limit:12}),sa($.id,{status:"sold",limit:12}),ha($.id,"received")]),re=Pa(ve);return{user:W,activeProducts:q.docs,soldProducts:ee.docs,ratings:ve,ratingStats:re,totalActiveProducts:q.totalDocs,totalSoldProducts:ee.totalDocs}},At=Object.freeze(Object.defineProperty({__proto__:null,load:ja},Symbol.toStringTag,{value:"Module"}));var za=i('<img class="svelte-xnw5yb"/>'),Da=i('<div class="no-image svelte-xnw5yb">No Image</div>'),Ca=i('<span class="current-bid svelte-xnw5yb"> </span> <span class="bid-label svelte-xnw5yb">Current bid</span>',1),Ia=i('<span class="starting-price svelte-xnw5yb"> </span> <span class="bid-label svelte-xnw5yb">Starting price</span>',1),La=i('<a class="product-card svelte-xnw5yb"><div class="product-image svelte-xnw5yb"><!> <div class="status-badge available svelte-xnw5yb">Active</div></div> <div class="product-info svelte-xnw5yb"><h3 class="svelte-xnw5yb"> </h3> <div class="product-price svelte-xnw5yb"><!></div></div></a>'),Na=i('<section class="listings-section svelte-xnw5yb"><h2 class="svelte-xnw5yb">Active Listings</h2> <div class="products-grid svelte-xnw5yb"></div></section>'),Oa=i('<img class="svelte-xnw5yb"/>'),Ta=i('<div class="no-image svelte-xnw5yb">No Image</div>'),Ha=i('<a class="product-card sold svelte-xnw5yb"><div class="product-image svelte-xnw5yb"><!> <div class="status-badge sold svelte-xnw5yb">Sold</div></div> <div class="product-info svelte-xnw5yb"><h3 class="svelte-xnw5yb"> </h3> <div class="product-price svelte-xnw5yb"><span class="sold-price svelte-xnw5yb"> </span> <span class="bid-label svelte-xnw5yb">Final price</span></div></div></a>'),Ma=i('<section class="listings-section svelte-xnw5yb"><h2 class="svelte-xnw5yb">Completed Sales</h2> <div class="products-grid svelte-xnw5yb"></div></section>'),Ea=i(`<div class="empty-state svelte-xnw5yb"><p>This user hasn't listed any products yet.</p></div>`),Wa=i('<div class="tab-content svelte-xnw5yb"><!> <!> <!></div>'),qa=i('<img class="svelte-xnw5yb"/>'),Ga=i('<div class="no-image-thumb svelte-xnw5yb">ðŸ“¦</div>'),Ja=i('<a class="review-product-image svelte-xnw5yb"><!></a>'),Ka=i('<div class="review-product-image placeholder svelte-xnw5yb"><div class="no-image-thumb svelte-xnw5yb">ðŸ“¦</div></div>'),Qa=i('<div class="review-product-info svelte-xnw5yb"><a class="product-title-link svelte-xnw5yb"> </a> <span class="transaction-role svelte-xnw5yb">Sold this item</span> <a class="chat-link svelte-xnw5yb" title="Open chat">ðŸ’¬ Chat</a></div>'),Va=i('<p class="review-comment svelte-xnw5yb"> </p>'),Xa=i('<span class="follow-up-date svelte-xnw5yb"> </span>'),Ya=i('<p class="review-comment svelte-xnw5yb"> </p>'),Za=i('<div class="follow-up-review svelte-xnw5yb"><div class="follow-up-header svelte-xnw5yb"><span class="follow-up-label svelte-xnw5yb">Follow-up</span> <!></div> <div class="review-rating svelte-xnw5yb"><!> <span class="rating-score svelte-xnw5yb"> </span></div> <!></div>'),$a=i('<div class="review-card svelte-xnw5yb"><!> <div class="review-details svelte-xnw5yb"><!> <div class="review-header svelte-xnw5yb"><div class="reviewer-info svelte-xnw5yb"><span class="reviewer-name svelte-xnw5yb"> </span> <span class="reviewer-role buyer-badge svelte-xnw5yb">Buyer</span></div> <span class="review-date svelte-xnw5yb"> </span></div> <div class="review-rating svelte-xnw5yb"><!> <span class="rating-score svelte-xnw5yb"> </span></div> <!> <!></div></div>'),et=i('<section class="reviews-section svelte-xnw5yb"><div class="reviews-section-header svelte-xnw5yb"><h2 class="svelte-xnw5yb">Reviews as Seller</h2> <span class="reviews-count svelte-xnw5yb"> </span></div> <div class="reviews-list svelte-xnw5yb"></div></section>'),at=i('<img class="svelte-xnw5yb"/>'),tt=i('<div class="no-image-thumb svelte-xnw5yb">ðŸ“¦</div>'),st=i('<a class="review-product-image svelte-xnw5yb"><!></a>'),vt=i('<div class="review-product-image placeholder svelte-xnw5yb"><div class="no-image-thumb svelte-xnw5yb">ðŸ“¦</div></div>'),rt=i('<div class="review-product-info svelte-xnw5yb"><a class="product-title-link svelte-xnw5yb"> </a> <span class="transaction-role svelte-xnw5yb">Won this item</span> <a class="chat-link svelte-xnw5yb" title="Open chat">ðŸ’¬ Chat</a></div>'),lt=i('<p class="review-comment svelte-xnw5yb"> </p>'),it=i('<span class="follow-up-date svelte-xnw5yb"> </span>'),nt=i('<p class="review-comment svelte-xnw5yb"> </p>'),ot=i('<div class="follow-up-review svelte-xnw5yb"><div class="follow-up-header svelte-xnw5yb"><span class="follow-up-label svelte-xnw5yb">Follow-up</span> <!></div> <div class="review-rating svelte-xnw5yb"><!> <span class="rating-score svelte-xnw5yb"> </span></div> <!></div>'),dt=i('<div class="review-card svelte-xnw5yb"><!> <div class="review-details svelte-xnw5yb"><!> <div class="review-header svelte-xnw5yb"><div class="reviewer-info svelte-xnw5yb"><span class="reviewer-name svelte-xnw5yb"> </span> <span class="reviewer-role seller-badge svelte-xnw5yb">Seller</span></div> <span class="review-date svelte-xnw5yb"> </span></div> <div class="review-rating svelte-xnw5yb"><!> <span class="rating-score svelte-xnw5yb"> </span></div> <!> <!></div></div>'),ct=i('<section class="reviews-section svelte-xnw5yb"><div class="reviews-section-header svelte-xnw5yb"><h2 class="svelte-xnw5yb">Reviews as Buyer</h2> <span class="reviews-count svelte-xnw5yb"> </span></div> <div class="reviews-list svelte-xnw5yb"></div></section>'),_t=i("<!> <!>",1),wt=i(`<div class="empty-state svelte-xnw5yb"><p>This user hasn't received any reviews yet.</p></div>`),bt=i('<div class="tab-content svelte-xnw5yb"><!></div>'),xt=i('<div class="profile-page svelte-xnw5yb"><div class="profile-container svelte-xnw5yb"><div class="profile-header svelte-xnw5yb"><div class="profile-avatar svelte-xnw5yb"> </div> <div class="profile-info svelte-xnw5yb"><h1 class="profile-name svelte-xnw5yb"> </h1> <p class="member-since svelte-xnw5yb"> </p> <div class="profile-stats svelte-xnw5yb"><div class="stat-item svelte-xnw5yb"><div class="stat-rating svelte-xnw5yb"><!> <span class="stat-value svelte-xnw5yb"> </span></div> <span class="stat-label svelte-xnw5yb"> </span></div> <div class="stat-divider svelte-xnw5yb"></div> <div class="stat-item svelte-xnw5yb"><div class="stat-rating svelte-xnw5yb"><!> <span class="stat-value svelte-xnw5yb"> </span></div> <span class="stat-label svelte-xnw5yb"> </span></div> <div class="stat-divider svelte-xnw5yb"></div> <div class="stat-item svelte-xnw5yb"><span class="stat-value svelte-xnw5yb"> </span> <span class="stat-label svelte-xnw5yb">Completed Sales</span></div> <div class="stat-divider svelte-xnw5yb"></div> <div class="stat-item svelte-xnw5yb"><span class="stat-value svelte-xnw5yb"> </span> <span class="stat-label svelte-xnw5yb">Active Listings</span></div></div></div></div> <div class="profile-tabs svelte-xnw5yb"><button>Listings</button> <button> </button></div> <!></div></div>');function Ft($,x){Sa(x,!0);function W(o){return new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function q(o){var u;if(o.images&&o.images.length>0){const z=(u=o.images[0])==null?void 0:u.image;if(typeof z=="object"&&(z!=null&&z.url))return z.url}return null}function ee(o,u="PHP"){return new Intl.NumberFormat("en-PH",{style:"currency",currency:u,minimumFractionDigits:0,maximumFractionDigits:0}).format(o)}function ve(o){return typeof o.rater=="object"&&o.rater&&o.rater.name||"Anonymous"}function re(o){if(typeof o.transaction=="object"&&o.transaction){const u=o.transaction;if(typeof u.product=="object"&&u.product)return u.product}return null}function Ee(o){const u=re(o);return u?q(u):null}let ae=Aa("listings"),_e=H(()=>x.data.ratings.filter(o=>o.raterRole==="buyer")),we=H(()=>x.data.ratings.filter(o=>o.raterRole==="seller"));var me=xt();ka("xnw5yb",o=>{Ra(()=>{Fa.title=`${x.data.user.name??""} - User Profile`})});var We=t(me),fe=t(We),ge=t(fe),ia=t(ge,!0);e(ge);var qe=s(ge,2),he=t(qe),na=t(he,!0);e(he);var Pe=s(he,2),oa=t(Pe);e(Pe);var Ge=s(Pe,2),Se=t(Ge),Ue=t(Se),Je=t(Ue);se(Je,{get rating(){return x.data.ratingStats.asSeller.averageRating},size:"small"});var Ke=s(Je,2),da=t(Ke,!0);e(Ke),e(Ue);var Qe=s(Ue,2),ca=t(Qe);e(Qe),e(Se);var Re=s(Se,4),Ae=t(Re),Ve=t(Ae);se(Ve,{get rating(){return x.data.ratingStats.asBuyer.averageRating},size:"small"});var Xe=s(Ve,2),_a=t(Xe,!0);e(Xe),e(Ae);var Ye=s(Ae,2),wa=t(Ye);e(Ye),e(Re);var Fe=s(Re,4),Ze=t(Fe),ba=t(Ze,!0);e(Ze),E(2),e(Fe);var $e=s(Fe,4),ea=t($e),xa=t(ea,!0);e(ea),E(2),e($e),e(Ge),e(qe),e(fe);var Be=s(fe,2),ke=t(Be);let aa;var be=s(ke,2);let ta;var ua=t(be);e(be),e(Be);var ya=s(Be,2);{var pa=o=>{var u=Wa(),z=t(u);{var le=B=>{var D=Na(),K=s(t(D),2);ye(K,21,()=>x.data.activeProducts,pe,(C,c)=>{var h=La(),k=t(h),Q=t(k);{var M=_=>{var P=za();b(R=>{U(P,"src",R),U(P,"alt",a(c).title)},[()=>q(a(c))]),l(_,P)},V=H(()=>q(a(c))),n=_=>{var P=Da();l(_,P)};y(Q,_=>{a(V)?_(M):_(n,!1)})}E(2),e(k);var p=s(k,2),j=t(p),I=t(j,!0);e(j);var L=s(j,2),J=t(L);{var X=_=>{var P=Ca(),R=Me(P),N=t(R,!0);e(R),E(2),b(A=>d(N,A),[()=>{var A;return ee(a(c).currentBid,(A=a(c).seller)==null?void 0:A.currency)}]),l(_,P)},f=_=>{var P=Ia(),R=Me(P),N=t(R,!0);e(R),E(2),b(A=>d(N,A),[()=>{var A;return ee(a(c).startingPrice,(A=a(c).seller)==null?void 0:A.currency)}]),l(_,P)};y(J,_=>{a(c).currentBid?_(X):_(f,!1)})}e(L),e(p),e(h),b(()=>{U(h,"href",`/products/${a(c).id??""}`),d(I,a(c).title)}),l(C,h)}),e(K),e(D),l(B,D)};y(z,B=>{x.data.activeProducts.length>0&&B(le)})}var xe=s(z,2);{var G=B=>{var D=Ma(),K=s(t(D),2);ye(K,21,()=>x.data.soldProducts,pe,(C,c)=>{var h=Ha(),k=t(h),Q=t(k);{var M=f=>{var _=Oa();b(P=>{U(_,"src",P),U(_,"alt",a(c).title)},[()=>q(a(c))]),l(f,_)},V=H(()=>q(a(c))),n=f=>{var _=Ta();l(f,_)};y(Q,f=>{a(V)?f(M):f(n,!1)})}E(2),e(k);var p=s(k,2),j=t(p),I=t(j,!0);e(j);var L=s(j,2),J=t(L),X=t(J,!0);e(J),E(2),e(L),e(p),e(h),b(f=>{U(h,"href",`/products/${a(c).id??""}`),d(I,a(c).title),d(X,f)},[()=>{var f;return ee(a(c).currentBid||a(c).startingPrice,(f=a(c).seller)==null?void 0:f.currency)}]),l(C,h)}),e(K),e(D),l(B,D)};y(xe,B=>{x.data.soldProducts.length>0&&B(G)})}var te=s(xe,2);{var ue=B=>{var D=Ea();l(B,D)};y(te,B=>{x.data.activeProducts.length===0&&x.data.soldProducts.length===0&&B(ue)})}e(u),l(o,u)},ma=o=>{var u=bt(),z=t(u);{var le=G=>{var te=_t(),ue=Me(te);{var B=C=>{var c=et(),h=t(c),k=s(t(h),2),Q=t(k);e(k),e(h);var M=s(h,2);ye(M,21,()=>a(_e),pe,(V,n)=>{const p=H(()=>re(a(n))),j=H(()=>Ee(a(n)));var I=$a(),L=t(I);{var J=v=>{var r=Ja(),w=t(r);{var O=m=>{var S=qa();b(()=>{U(S,"src",a(j)),U(S,"alt",a(p).title)}),l(m,S)},T=m=>{var S=Ga();l(m,S)};y(w,m=>{a(j)?m(O):m(T,!1)})}e(r),b(()=>U(r,"href",`/products/${a(p).id??""}`)),l(v,r)},X=v=>{var r=Ka();l(v,r)};y(L,v=>{a(p)?v(J):v(X,!1)})}var f=s(L,2),_=t(f);{var P=v=>{var r=Qa(),w=t(r),O=t(w,!0);e(w);var T=s(w,4);e(r),b(()=>{U(w,"href",`/products/${a(p).id??""}`),d(O,a(p).title),U(T,"href",`/inbox?product=${a(p).id??""}`)}),l(v,r)};y(_,v=>{a(p)&&v(P)})}var R=s(_,2),N=t(R),A=t(N),je=t(A,!0);e(A),E(2),e(N);var ie=s(N,2),ze=t(ie,!0);e(ie),e(R);var Y=s(R,2),ne=t(Y);se(ne,{get rating(){return a(n).rating},size:"small"});var oe=s(ne,2),De=t(oe);e(oe),e(Y);var de=s(Y,2);{var Ce=v=>{var r=Va(),w=t(r);e(r),b(()=>d(w,`"${a(n).comment??""}"`)),l(v,r)};y(de,v=>{a(n).comment&&v(Ce)})}var Ie=s(de,2);{var Le=v=>{var r=Za(),w=t(r),O=s(t(w),2);{var T=g=>{var F=Xa(),Z=t(F,!0);e(F),b(He=>d(Z,He),[()=>W(a(n).followUp.createdAt)]),l(g,F)};y(O,g=>{a(n).followUp.createdAt&&g(T)})}e(w);var m=s(w,2),S=t(m);{let g=H(()=>a(n).followUp.rating||0);se(S,{get rating(){return a(g)},size:"small"})}var ce=s(S,2),Ne=t(ce);e(ce),e(m);var Oe=s(m,2);{var Te=g=>{var F=Ya(),Z=t(F);e(F),b(()=>d(Z,`"${a(n).followUp.comment??""}"`)),l(g,F)};y(Oe,g=>{a(n).followUp.comment&&g(Te)})}e(r),b(()=>d(Ne,`${a(n).followUp.rating??""}/5`)),l(v,r)};y(Ie,v=>{a(n).hasFollowUp&&a(n).followUp&&v(Le)})}e(f),e(I),b((v,r)=>{d(je,v),d(ze,r),d(De,`${a(n).rating??""}/5`)},[()=>ve(a(n)),()=>W(a(n).createdAt)]),l(V,I)}),e(M),e(c),b(()=>d(Q,`${a(_e).length??""} review${a(_e).length!==1?"s":""}`)),l(C,c)};y(ue,C=>{a(_e).length>0&&C(B)})}var D=s(ue,2);{var K=C=>{var c=ct(),h=t(c),k=s(t(h),2),Q=t(k);e(k),e(h);var M=s(h,2);ye(M,21,()=>a(we),pe,(V,n)=>{const p=H(()=>re(a(n))),j=H(()=>Ee(a(n)));var I=dt(),L=t(I);{var J=v=>{var r=st(),w=t(r);{var O=m=>{var S=at();b(()=>{U(S,"src",a(j)),U(S,"alt",a(p).title)}),l(m,S)},T=m=>{var S=tt();l(m,S)};y(w,m=>{a(j)?m(O):m(T,!1)})}e(r),b(()=>U(r,"href",`/products/${a(p).id??""}`)),l(v,r)},X=v=>{var r=vt();l(v,r)};y(L,v=>{a(p)?v(J):v(X,!1)})}var f=s(L,2),_=t(f);{var P=v=>{var r=rt(),w=t(r),O=t(w,!0);e(w);var T=s(w,4);e(r),b(()=>{U(w,"href",`/products/${a(p).id??""}`),d(O,a(p).title),U(T,"href",`/inbox?product=${a(p).id??""}`)}),l(v,r)};y(_,v=>{a(p)&&v(P)})}var R=s(_,2),N=t(R),A=t(N),je=t(A,!0);e(A),E(2),e(N);var ie=s(N,2),ze=t(ie,!0);e(ie),e(R);var Y=s(R,2),ne=t(Y);se(ne,{get rating(){return a(n).rating},size:"small"});var oe=s(ne,2),De=t(oe);e(oe),e(Y);var de=s(Y,2);{var Ce=v=>{var r=lt(),w=t(r);e(r),b(()=>d(w,`"${a(n).comment??""}"`)),l(v,r)};y(de,v=>{a(n).comment&&v(Ce)})}var Ie=s(de,2);{var Le=v=>{var r=ot(),w=t(r),O=s(t(w),2);{var T=g=>{var F=it(),Z=t(F,!0);e(F),b(He=>d(Z,He),[()=>W(a(n).followUp.createdAt)]),l(g,F)};y(O,g=>{a(n).followUp.createdAt&&g(T)})}e(w);var m=s(w,2),S=t(m);{let g=H(()=>a(n).followUp.rating||0);se(S,{get rating(){return a(g)},size:"small"})}var ce=s(S,2),Ne=t(ce);e(ce),e(m);var Oe=s(m,2);{var Te=g=>{var F=nt(),Z=t(F);e(F),b(()=>d(Z,`"${a(n).followUp.comment??""}"`)),l(g,F)};y(Oe,g=>{a(n).followUp.comment&&g(Te)})}e(r),b(()=>d(Ne,`${a(n).followUp.rating??""}/5`)),l(v,r)};y(Ie,v=>{a(n).hasFollowUp&&a(n).followUp&&v(Le)})}e(f),e(I),b((v,r)=>{d(je,v),d(ze,r),d(De,`${a(n).rating??""}/5`)},[()=>ve(a(n)),()=>W(a(n).createdAt)]),l(V,I)}),e(M),e(c),b(()=>d(Q,`${a(we).length??""} review${a(we).length!==1?"s":""}`)),l(C,c)};y(D,C=>{a(we).length>0&&C(K)})}l(G,te)},xe=G=>{var te=wt();l(G,te)};y(z,G=>{x.data.ratings.length>0?G(le):G(xe,!1)})}e(u),l(o,u)};y(ya,o=>{a(ae)==="listings"?o(pa):a(ae)==="reviews"&&o(ma,1)})}e(We),e(me),b((o,u,z,le)=>{d(ia,o),d(na,x.data.user.name),d(oa,`Member since ${u??""}`),d(da,z),d(ca,`Seller Rating (${x.data.ratingStats.asSeller.totalRatings??""})`),d(_a,le),d(wa,`Buyer Rating (${x.data.ratingStats.asBuyer.totalRatings??""})`),d(ba,x.data.totalSoldProducts),d(xa,x.data.totalActiveProducts),aa=la(ke,1,"tab-btn svelte-xnw5yb",null,aa,{active:a(ae)==="listings"}),ta=la(be,1,"tab-btn svelte-xnw5yb",null,ta,{active:a(ae)==="reviews"}),d(ua,`Reviews (${x.data.ratings.length??""})`)},[()=>{var o,u;return((u=(o=x.data.user.name)==null?void 0:o.charAt(0))==null?void 0:u.toUpperCase())||"?"},()=>W(x.data.user.createdAt),()=>x.data.ratingStats.asSeller.averageRating.toFixed(1),()=>x.data.ratingStats.asBuyer.averageRating.toFixed(1)]),ra("click",ke,()=>va(ae,"listings")),ra("click",be,()=>va(ae,"reviews")),l($,me),Ua()}Ba(["click"]);export{Ft as component,At as universal};
