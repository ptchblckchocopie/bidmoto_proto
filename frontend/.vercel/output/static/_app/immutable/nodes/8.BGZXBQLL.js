import{n as ui,p as Le,B as li,i as Qi,j as ts,h as es,D as is}from"../chunks/CYvOnIj9.js";import{e as ss}from"../chunks/pfMRWl6z.js";import{c as Ae,a as c,f as m,b as ls}from"../chunks/D_ansCh4.js";import{o as pi,a as as}from"../chunks/YuJsNucz.js";import{p as mi,av as T,z as Ce,aw as ge,y as t,A as r,f as Wt,a as fi,c as s,r as i,aE as _t,s as a,t as w,aF as rs,$ as os,n as Pe}from"../chunks/Cl0DMWZv.js";import{d as ns,s as u,a as dt,e as ds}from"../chunks/Cv63ugJo.js";import{i as h,a as cs}from"../chunks/BTM6jyxq.js";import{e as ke,i as De}from"../chunks/CXL-JkK8.js";import{h as vs}from"../chunks/avLAz_gZ.js";import{s as F,r as ai}from"../chunks/j3NwBB6B.js";import{s as Bt}from"../chunks/D9jd4Gan.js";import{s as Re}from"../chunks/BTB6Rw-c.js";import{a as us,b as ps}from"../chunks/DQcjtaIM.js";import{p as be}from"../chunks/ChVnncLT.js";import{a as ms,s as fs}from"../chunks/BF7g9if2.js";import"../chunks/eE_TcHx0.js";import"../chunks/BUApaBEI.js";import{p as ri}from"../chunks/DbvR7NoS.js";import{P as _s}from"../chunks/E8cYmJKZ.js";import{I as hs}from"../chunks/vwYYfMcD.js";import{S as oi}from"../chunks/CsWrsq56.js";import{b as gs,a as bs,q as ws}from"../chunks/TOj9C5s8.js";import{b as ni}from"../chunks/D-OXtg45.js";import{d as ys,S as xs,P as Bs,c as Ss,G as Ps,j as ks,E as di,L as ci,b as vi,V as te,k as As,B as Cs,l as Es,m as Ms,n as Ts,g as $s,h as Is,i as Ds}from"../chunks/BfWXKq_L.js";const Rs=async({params:ee,fetch:Ct})=>{const pt=await ui(ee.id,Ct);if(!pt)throw ss(404,"Product not found");const de=await Le(ee.id,Ct);return{product:pt,bids:de}},ra=Object.freeze(Object.defineProperty({__proto__:null,load:Rs},Symbol.toStringTag,{value:"Module"}));var Ls=m('<div class="three-showcase svelte-ubs749"><canvas class="svelte-ubs749"></canvas></div>'),Ys=m("<div></div>");function Us(ee,Ct){mi(Ct,!0);let pt=be(Ct,"bidCount",3,0),de=be(Ct,"isActive",3,!0);be(Ct,"currentBid",3,0),be(Ct,"startingPrice",3,0);let ce,e,ie=T(null),se=T(!1),I=T(Ce(pt())),it=[],ot=null,gt=null;function bt(st){let D=0;for(const ct of it)!ct.active&&D<st&&(ct.active=!0,ct.life=0,ct.maxLife=1.5+Math.random()*.5,ct.position.set((Math.random()-.5)*4,-1,(Math.random()-.5)*4),ct.velocity.set((Math.random()-.5)*2,2+Math.random()*3,(Math.random()-.5)*2),D++)}ge(()=>{if(pt()>t(I)&&it.length>0){const st=Math.min(20,Math.max(10,(pt()-t(I))*10));bt(st)}r(I,pt())}),pi(()=>{if(r(ie,ys(),!0),r(se,t(ie).tier==="low"),t(se))return;const st=new xs,D=new Bs(45,1,.1,100);D.position.set(0,2,10),D.lookAt(0,0,0);const ct=Ss(ce,t(ie)),ht=new Ps,Lt=new ks(5,4,.3),Vt=new di(Lt),Et=new ci({color:0,transparent:!0,opacity:.1}),ae=new vi(Vt,Et);Lt.dispose(),ht.add(ae);const pe=[new te(-2.5,2,0),new te(2.5,2,0),new te(-2.5,-2,0),new te(2.5,-2,0)],Ot=[];for(const W of pe){const St=new As(.3),Yt=new di(St),yt=new ci({color:0,transparent:!0,opacity:.1}),P=new vi(Yt,yt);St.dispose(),P.position.copy(W),ht.add(P),Ot.push({mesh:P,rotSpeed:new te((Math.random()-.5)*2,(Math.random()-.5)*2,(Math.random()-.5)*1)})}st.add(ht);const me=50;for(let W=0;W<me;W++)it.push({position:new te(0,-10,0),velocity:new te(0,0,0),life:0,maxLife:2,active:!1});const zt=new Float32Array(me*3);gt=new Cs,gt.setAttribute("position",new Es(zt,3));const wt=new Ms({color:0,transparent:!0,opacity:.15,size:2,sizeAttenuation:!1});ot=new Ts(gt,wt),st.add(ot);const Mt=$s((W,St)=>{if(ht.rotation.y+=W*.3,de()){const P=.08+Math.sin(St*2)*.04;ae.material.opacity=P}for(const P of Ot)P.mesh.rotation.x+=P.rotSpeed.x*W,P.mesh.rotation.y+=P.rotSpeed.y*W;const Yt=gt.attributes.position;for(let P=0;P<it.length;P++){const vt=it[P];vt.active&&(vt.life+=W,vt.life>=vt.maxLife?(vt.active=!1,vt.position.set(0,-10,0)):(vt.position.x+=vt.velocity.x*W,vt.position.y+=vt.velocity.y*W,vt.position.z+=vt.velocity.z*W,vt.velocity.multiplyScalar(.98))),Yt.setXYZ(P,vt.position.x,vt.position.y,vt.position.z)}Yt.needsUpdate=!0;const yt=it.filter(P=>P.active).length;ot.material.opacity=yt>0?.15:0,ct.render(st,D)});Mt.start();const Tt=new ResizeObserver(W=>{for(const St of W){const{width:Yt,height:yt}=St.contentRect;Yt>0&&yt>0&&(D.aspect=Yt/yt,D.updateProjectionMatrix(),ct.setSize(Yt,yt))}});return Tt.observe(e),()=>{Mt.stop(),Tt.disconnect(),it=[],gt=null,ot=null,Is(st),Ds(ct)}});var Rt=Ae(),ve=Wt(Rt);{var le=st=>{var D=Ls(),ct=s(D);ni(ct,ht=>ce=ht,()=>ce),i(D),ni(D,ht=>e=ht,()=>e),c(st,D)},ue=st=>{var D=Ys();c(st,D)};h(ve,st=>{t(se)?st(ue,!1):st(le)})}c(ee,Rt),fi()}var Ns=m('<meta property="og:image" class="svelte-9lltit"/>'),js=m('<meta property="twitter:image" class="svelte-9lltit"/>'),Hs=m('<meta property="og:type" content="website" class="svelte-9lltit"/> <meta property="og:url" class="svelte-9lltit"/> <meta property="og:title" class="svelte-9lltit"/> <meta property="og:description" class="svelte-9lltit"/> <!> <meta property="twitter:card" content="summary_large_image" class="svelte-9lltit"/> <meta property="twitter:url" class="svelte-9lltit"/> <meta property="twitter:title" class="svelte-9lltit"/> <meta property="twitter:description" class="svelte-9lltit"/> <!>',1),Os=m(`<div class="error svelte-9lltit"><h1 class="svelte-9lltit">Product Not Found</h1> <p class="svelte-9lltit">The product you're looking for doesn't exist.</p> <a class="svelte-9lltit"> </a></div>`),zs=m('<button class="edit-product-btn svelte-9lltit">‚úèÔ∏è Edit Product</button>'),Gs=ls('<circle r="1.5"></circle>'),Fs=m('<div class="price-analytics svelte-9lltit"><h3 class="svelte-9lltit">üìä Price Analytics Over Time</h3> <div class="chart-container svelte-9lltit"><svg viewBox="0 0 100 100" preserveAspectRatio="none" class="price-chart svelte-9lltit"><defs class="svelte-9lltit"><linearGradient id="price-gradient" x1="0%" y1="0%" x2="0%" y2="100%" class="svelte-9lltit"><stop offset="0%" style="stop-color:#000000;stop-opacity:0.3" class="svelte-9lltit"></stop><stop offset="100%" style="stop-color:#000000;stop-opacity:0" class="svelte-9lltit"></stop></linearGradient></defs><line x1="0" y1="0" x2="100" y2="0" class="grid-line svelte-9lltit"></line><line x1="0" y1="25" x2="100" y2="25" class="grid-line svelte-9lltit"></line><line x1="0" y1="50" x2="100" y2="50" class="grid-line svelte-9lltit"></line><line x1="0" y1="75" x2="100" y2="75" class="grid-line svelte-9lltit"></line><line x1="0" y1="100" x2="100" y2="100" class="grid-line svelte-9lltit"></line><path class="price-area svelte-9lltit"></path><polyline class="price-line svelte-9lltit"></polyline><!></svg> <div class="chart-labels svelte-9lltit"><div class="label-left svelte-9lltit"><div class="label-title svelte-9lltit">Starting</div> <div class="label-value svelte-9lltit"> </div></div> <div class="label-center svelte-9lltit"><div class="label-title svelte-9lltit"> </div></div> <div class="label-right svelte-9lltit"><div class="label-title svelte-9lltit">Current</div> <div class="label-value svelte-9lltit"> </div></div></div></div></div>'),Ws=m('<span class="member-since svelte-9lltit"> </span>'),Vs=m('<div class="loading-stats svelte-9lltit">Loading...</div>'),qs=m('<div class="stat-item svelte-9lltit"><span class="stat-title svelte-9lltit">Seller</span> <div class="stat-rating svelte-9lltit"><!> <span class="stat-value svelte-9lltit"> </span></div> <span class="stat-label svelte-9lltit"> </span></div> <div class="stat-divider svelte-9lltit"></div> <div class="stat-item svelte-9lltit"><span class="stat-title svelte-9lltit">Buyer</span> <div class="stat-rating svelte-9lltit"><!> <span class="stat-value svelte-9lltit"> </span></div> <span class="stat-label svelte-9lltit"> </span></div> <div class="stat-divider svelte-9lltit"></div> <div class="stat-item svelte-9lltit"><span class="stat-value svelte-9lltit"> </span> <span class="stat-label svelte-9lltit"> </span></div>',1),Js=m('<div class="seller-location svelte-9lltit"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-9lltit"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" class="svelte-9lltit"></path><circle cx="12" cy="10" r="3" class="svelte-9lltit"></circle></svg> <span class="svelte-9lltit"> </span></div>'),Ks=m('<div class="inactive-warning svelte-9lltit"><span class="warning-icon svelte-9lltit">‚ö†Ô∏è</span> <span class="svelte-9lltit">This product is currently inactive and hidden from Browse Products</span></div>'),Zs=m('<div class="confetti svelte-9lltit"></div>'),Xs=m('<div class="confetti-container svelte-9lltit"></div>'),Qs=m('<div class="countdown-timer-badge svelte-9lltit"><span class="countdown-label svelte-9lltit">Ends in:</span> <span class="countdown-time svelte-9lltit"> </span></div>'),tl=m('<div class="percentage-increase svelte-9lltit"><svg class="arrow-up-icon svelte-9lltit" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15" class="svelte-9lltit"></polyline></svg> <span class="percentage-text svelte-9lltit"> </span></div>'),el=m('<button class="bid-toggle-pill svelte-9lltit"><span class="pill-text svelte-9lltit"> </span> <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="6 9 12 15 18 9" class="svelte-9lltit"></polyline></svg></button>'),il=m('<div><div class="highest-bid-header svelte-9lltit"><div>CURRENT HIGHEST BID</div></div> <div class="bid-with-percentage svelte-9lltit"><div> </div> <!></div> <div class="starting-price-small svelte-9lltit"> </div> <!></div>'),sl=m('<button class="bid-toggle-pill svelte-9lltit"><span class="pill-text svelte-9lltit"> </span> <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="6 9 12 15 18 9" class="svelte-9lltit"></polyline></svg></button>'),ll=m('<div><div class="highest-bid-header svelte-9lltit"><div class="highest-bid-label svelte-9lltit">STARTING BID</div></div> <div class="highest-bid-amount svelte-9lltit"> </div> <div class="starting-price-small svelte-9lltit">No bids yet - be the first!</div> <!></div>'),al=m('<div class="price-info svelte-9lltit"><!> <!> <!></div>'),rl=m('<div class="highest-bid-info svelte-9lltit"><p class="info-text svelte-9lltit">Current Highest Bid:</p> <p class="bid-amount-large svelte-9lltit"> </p> <p class="bidder-info svelte-9lltit"> </p></div> <button class="accept-bid-btn svelte-9lltit">‚úì Accept Bid & Close Auction</button>',1),ol=m('<div class="info-message svelte-9lltit"><p class="svelte-9lltit">No bids yet. Waiting for bidders...</p></div>'),nl=m('<div class="bid-section owner-section svelte-9lltit"><div class="bid-section-header svelte-9lltit"><h3 class="svelte-9lltit">Your Listing</h3> <div class="countdown-timer-inline svelte-9lltit"><span class="countdown-label svelte-9lltit">Ends in:</span> <span class="countdown-time svelte-9lltit"> </span></div></div> <!></div>'),dl=m('<div class="info-message svelte-9lltit"><p class="svelte-9lltit">üîí You must be logged in to place a bid</p></div>'),cl=m('<div class="error-message svelte-9lltit"> </div>'),vl=m('<div><div class="bid-section-content svelte-9lltit"><div class="bid-section-header svelte-9lltit"><h3 class="svelte-9lltit">Place Your Bid</h3></div> <!> <!> <div class="bid-form svelte-9lltit"><div class="bid-input-group svelte-9lltit"><label class="svelte-9lltit">Your Bid Amount</label> <div class="bid-row svelte-9lltit"><div class="bid-control svelte-9lltit"><button class="bid-arrow-btn svelte-9lltit" type="button" aria-label="Decrease bid"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-9lltit"><polyline points="6 9 12 15 18 9" class="svelte-9lltit"></polyline></svg></button> <input type="number" class="bid-amount-input svelte-9lltit"/> <button class="bid-arrow-btn svelte-9lltit" type="button" aria-label="Increase bid"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-9lltit"><polyline points="18 15 12 9 6 15" class="svelte-9lltit"></polyline></svg></button></div> <button class="place-bid-btn svelte-9lltit"> </button></div> <p class="bid-hint svelte-9lltit"> </p></div></div></div></div>'),ul=m('<div class="winner-percentage-increase svelte-9lltit"><svg class="arrow-up-icon svelte-9lltit" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15" class="svelte-9lltit"></polyline></svg> <span class="percentage-text svelte-9lltit"> </span></div>'),pl=m('<div class="winner-info svelte-9lltit"><div class="winner-label svelte-9lltit">Winning Bid:</div> <div class="winner-amount-with-increase svelte-9lltit"><div class="winner-amount svelte-9lltit"> </div> <!></div> <div class="winner-bidder svelte-9lltit"> </div> <div class="starting-price-note svelte-9lltit"> </div></div>'),ml=m('<div class="no-winner-info svelte-9lltit"><div class="no-winner-icon svelte-9lltit">üì≠</div> <div class="no-winner-text svelte-9lltit">No Winning Bid</div> <div class="no-winner-desc svelte-9lltit">This auction ended without any bids.</div> <div class="starting-price-note svelte-9lltit"> </div></div>'),fl=m('<div class="auction-ended-section svelte-9lltit"><div class="ended-header svelte-9lltit"><h3 class="svelte-9lltit">üèÅ Auction Ended</h3></div> <!></div>'),_l=m('<div><span class="alert-icon svelte-9lltit">üëë</span> <span class="alert-text svelte-9lltit"> </span></div>'),hl=m('<div><span class="alert-icon svelte-9lltit">üò∞</span> <span class="alert-text svelte-9lltit"> </span></div>'),gl=m('<div class="winner-alert svelte-9lltit"><div class="winner-alert-header svelte-9lltit"><span class="alert-icon svelte-9lltit">üéâ</span> <span class="alert-text svelte-9lltit">Congratulations! You won this auction!</span></div> <p class="winner-alert-message svelte-9lltit">Please contact the seller to arrange payment and delivery.</p> <a class="winner-message-btn svelte-9lltit">üí¨ Message Seller</a></div>'),bl=m('<div class="contact-section svelte-9lltit"><a class="contact-btn svelte-9lltit">üí¨ Contact Buyer</a></div>'),wl=m('<div class="new-bid-indicator svelte-9lltit">NEW!</div>'),yl=m('<div class="highest-badge svelte-9lltit">üëë HIGHEST BID</div>'),xl=m('<div><!> <div class="bid-rank svelte-9lltit"> </div> <div class="bid-info svelte-9lltit"><div class="bid-amount svelte-9lltit"> </div> <div class="bid-details svelte-9lltit"><span class="bidder-name svelte-9lltit"> </span> <span class="bid-time svelte-9lltit"> </span></div></div> <!></div>'),Bl=m('<div class="bid-history svelte-9lltit"><h3 class="svelte-9lltit">Bid History</h3> <div class="bid-history-list svelte-9lltit"></div></div>'),Sl=m('<div class="product-detail svelte-9lltit"><div class="product-header svelte-9lltit"><a class="back-link svelte-9lltit"> </a> <!></div> <div class="product-content svelte-9lltit"><div class="product-gallery svelte-9lltit" style="position: relative; overflow: hidden;"><!> <div class="title-container svelte-9lltit"><h1 class="svelte-9lltit"> </h1> <div title="Real-time updates active (SSE + fallback polling)"><span class="live-dot svelte-9lltit"></span> <span class="live-text svelte-9lltit">LIVE</span></div></div> <div> </div> <!> <div class="description-section svelte-9lltit"><h3 class="svelte-9lltit">Description</h3> <p class="svelte-9lltit"> </p></div> <!> <div class="seller-info svelte-9lltit"><h3 class="svelte-9lltit">Seller Information</h3> <div class="seller-card svelte-9lltit"><div class="seller-header svelte-9lltit"><div class="seller-avatar svelte-9lltit"> </div> <div class="seller-details svelte-9lltit"><a class="seller-name svelte-9lltit"> </a> <!></div></div> <div class="seller-stats svelte-9lltit"><!></div> <!> <a class="view-profile-btn svelte-9lltit">View Profile</a></div></div></div> <div class="product-details svelte-9lltit"><!> <!> <!> <!> <!> <!></div></div></div>'),Pl=m('<div class="confirm-row svelte-9lltit"><span class="label svelte-9lltit">Current Highest:</span> <span class="value svelte-9lltit"> </span></div>'),kl=m('<div class="confirm-row svelte-9lltit"><span class="label svelte-9lltit">Starting Price:</span> <span class="value svelte-9lltit"> </span></div>'),Al=m('<div class="modal-overlay svelte-9lltit"><div class="modal-content confirm-modal svelte-9lltit"><button class="modal-close svelte-9lltit">&times;</button> <div class="modal-header svelte-9lltit"><h2 class="svelte-9lltit">Confirm Your Bid</h2></div> <div class="modal-body svelte-9lltit"><div class="confirm-details svelte-9lltit"><p class="product-title svelte-9lltit"> </p> <div class="bid-confirmation svelte-9lltit"><div class="confirm-row svelte-9lltit"><span class="label svelte-9lltit">Your Bid:</span> <span class="value bid-value svelte-9lltit"> </span></div> <!></div> <p class="confirm-message svelte-9lltit">Are you sure you want to place this bid? This action cannot be undone.</p> <div class="privacy-toggle svelte-9lltit"><label class="toggle-label svelte-9lltit"><input type="checkbox" class="svelte-9lltit"/> <span class="toggle-text svelte-9lltit">üîí Hide my full name (show only initials)</span></label> <p class="toggle-hint svelte-9lltit"> </p></div></div> <div class="modal-actions svelte-9lltit"><button class="btn-cancel-bid svelte-9lltit">Cancel</button> <button class="btn-confirm-bid svelte-9lltit">Confirm Bid</button></div></div></div></div>'),Cl=m('<div class="success-message svelte-9lltit">Bid accepted! Auction closed. Refreshing...</div>'),El=m('<div class="error-message svelte-9lltit"> </div>'),Ml=m('<div class="modal-overlay svelte-9lltit"><div class="modal-content confirm-modal svelte-9lltit"><button class="modal-close svelte-9lltit">&times;</button> <div class="modal-header svelte-9lltit"><h2 class="svelte-9lltit">Accept Bid & Close Auction</h2></div> <div class="modal-body svelte-9lltit"><!> <!> <div class="confirm-details svelte-9lltit"><p class="product-title svelte-9lltit"> </p> <div class="bid-confirmation accept-confirmation svelte-9lltit"><div class="confirm-row svelte-9lltit"><span class="label svelte-9lltit">Winning Bid:</span> <span class="value bid-value svelte-9lltit"> </span></div> <div class="confirm-row svelte-9lltit"><span class="label svelte-9lltit">Winner:</span> <span class="value svelte-9lltit"> </span></div> <div class="confirm-row svelte-9lltit"><span class="label svelte-9lltit">Bid Time:</span> <span class="value svelte-9lltit"> </span></div></div> <p class="confirm-message warning-message svelte-9lltit">‚ö†Ô∏è Are you sure you want to accept this bid? This will close the auction and mark the item as SOLD. This action cannot be undone.</p></div> <div class="modal-actions svelte-9lltit"><button class="btn-cancel-bid svelte-9lltit">Cancel</button> <button class="btn-accept-bid svelte-9lltit"> </button></div></div></div></div>'),Tl=m('<div class="toast-confetti-piece svelte-9lltit"></div>'),$l=m(`<div class="success-toast svelte-9lltit"><div class="toast-confetti svelte-9lltit"></div> <div class="toast-content svelte-9lltit"><div class="toast-icon svelte-9lltit"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svelte-9lltit"><polyline points="20 6 9 17 4 12" class="svelte-9lltit"></polyline></svg></div> <div class="toast-text svelte-9lltit"><span class="toast-title svelte-9lltit">Bid Placed Successfully!</span> <span class="toast-subtitle svelte-9lltit">You're now the highest bidder</span></div> <button class="toast-close svelte-9lltit" aria-label="Close"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-9lltit"><line x1="18" y1="6" x2="6" y2="18" class="svelte-9lltit"></line><line x1="6" y1="6" x2="18" y2="18" class="svelte-9lltit"></line></svg></button></div> <div class="toast-progress svelte-9lltit"></div></div>`),Il=m(`<div class="modal-overlay svelte-9lltit"><div class="modal-content svelte-9lltit"><button class="modal-close svelte-9lltit">&times;</button> <div class="modal-header svelte-9lltit"><h2 class="svelte-9lltit">üîí Login Required</h2></div> <div class="modal-body svelte-9lltit"><p class="svelte-9lltit">You need to be logged in to place a bid on this product.</p> <div class="modal-actions svelte-9lltit"><a class="btn-login svelte-9lltit">Login</a> <a class="btn-register svelte-9lltit">Create Account</a></div> <p class="modal-note svelte-9lltit">Don't have an account? Register now to start bidding!</p></div></div></div>`),Dl=m('<div class="modal-overlay svelte-9lltit"><div class="modal-content edit-modal svelte-9lltit"><button class="modal-close svelte-9lltit">&times;</button> <div class="modal-header svelte-9lltit"><h2 class="svelte-9lltit">Edit Product</h2></div> <div class="modal-body svelte-9lltit"><!></div></div></div>'),Rl=m("<!> <!> <!> <!> <!> <!>",1);function oa(ee,Ct){var qe,Je,Ke;mi(Ct,!0);const pt=()=>ms(cs,"$authStore",de),[de,ce]=fs();let e=be(Ct,"data",7),ie=_t(()=>(()=>{var o;switch(ri.url.searchParams.get("from")){case"inbox":return`/inbox?product=${((o=e().product)==null?void 0:o.id)||""}`;case"browse":return"/products";default:return"/products"}})()),se=_t(()=>(()=>{switch(ri.url.searchParams.get("from")){case"inbox":return"Back to Inbox";case"browse":return"Back to Products";default:return"Back to Products"}})()),I=T(0),it=_t(()=>{var l;return((l=e().product)==null?void 0:l.bidInterval)||1}),ot=_t(()=>{var l,o;return(((l=e().product)==null?void 0:l.currentBid)||((o=e().product)==null?void 0:o.startingPrice)||0)+t(it)});ge(()=>{t(ot)&&t(I)===0&&r(I,t(ot),!0)});let gt=T(!1),bt=T(""),Rt=T(!1),ve=T(!1),le=T(!1),ue=T(!1),st=T(!1),D=T(!1),ct=T(!0);ge(()=>{typeof window<"u"&&localStorage.setItem("bid_censor_name",String(t(ct)))});let ht=T(!1),Lt=T(""),Vt=T(!1),Et=T(null),ae=T(0),pe=T(!0),Ot=_t(()=>[...e().bids].sort((l,o)=>o.amount-l.amount)),me=_t(()=>{var l,o;return(l=e().product)!=null&&l.currentBid&&((o=e().product)!=null&&o.startingPrice)?((e().product.currentBid-e().product.startingPrice)/e().product.startingPrice*100).toFixed(1):"0.0"}),zt=T(""),wt=T(null),Mt=_t(()=>{var l;return(l=e().product)!=null&&l.auctionEndDate?new Date().getTime()>new Date(e().product.auctionEndDate).getTime():!1}),Tt=T(null),W=T(Ce({updatedAt:((qe=e().product)==null?void 0:qe.updatedAt)||"",latestBidTime:"",bidCount:e().bids.length,status:((Je=e().product)==null?void 0:Je.status)||"active",currentBid:(Ke=e().product)==null?void 0:Ke.currentBid})),St=T(!1),Yt="connected",yt=[];function P(l,o){const n=setTimeout(()=>{yt=yt.filter(v=>v!==n),l()},o);return yt.push(n),n}let vt=T(Ce([...e().bids])),jt=T(Ce(new Set)),Gt=T(!1),fe=T(!1),qt=T(!1),we=T(!1),Ee=T(!1),Jt=T("");const Me=["You're currently the highest bidder! üéØ","Leading the pack! Keep your eyes on the prize! üëÄ","You're in the lead! Stay sharp! ‚ö°","Top bidder alert! You're winning! üèÜ","You're ahead of the competition! üöÄ","Currently in first place! Nice move! üí™","You've taken the lead! Hold on tight! üé¢","Winning bid is yours... for now! üòé","You're the one to beat! ü•á","Sitting at the top! Great bid! ‚≠ê","You're dominating this auction! üî•","Front runner status achieved! üèÉ‚Äç‚ôÇÔ∏è"],_i=["Oh no! Someone just outbid you! üò±","Uh oh! You've been outbid! Time to strike back! ‚öîÔ∏è","Plot twist! Another bidder took the lead! üòÆ","You've been dethroned! Will you reclaim your spot? üëë","Someone swooped in! Don't let them win! ü¶Ö","Outbid alert! The competition is heating up! üî•","They snatched the lead! Fight back! üí•","You lost the top spot! Bid again to reclaim it! üéØ","A challenger appeared and took the lead! ‚ö°","Oops! Someone wants this more than you... or do they? ü§î","The tables have turned! Your move! ‚ôüÔ∏è","Knocked off the throne! Time for revenge? üò§"];function ye(l){return l[Math.floor(Math.random()*l.length)]}ge(()=>{var v;const l=(v=pt().user)==null?void 0:v.id,o=t(V)?typeof t(V).bidder=="object"?t(V).bidder.id:t(V).bidder:null,n=l&&o===l;t(we)&&!n&&l&&!t(Rt)&&!t(gt)?(r(qt,!0),r(Ee,!0),r(Jt,ye(_i),!0),P(()=>{r(Ee,!1)},500),P(()=>{r(qt,!1)},5e3)):n&&!t(we)?(r(qt,!1),r(Jt,ye(Me),!0)):n&&t(we)&&t(Rt)?(r(qt,!1),r(Jt,ye(Me),!0)):n&&!t(Jt)&&r(Jt,ye(Me),!0),r(we,!!n)});let Ut=_t(()=>{var o;const l=[...e().bids].sort((n,v)=>new Date(n.bidTime).getTime()-new Date(v.bidTime).getTime()).map((n,v)=>({time:new Date(n.bidTime),price:n.amount,index:v,x:0,y:0}));if(l.length>0){const n=((o=e().product)==null?void 0:o.startingPrice)||Math.min(...l.map(_=>_.price)),k=Math.max(...l.map(_=>_.price))-n||1;l.forEach(_=>{_.x=_.index/Math.max(l.length-1,1)*100,_.y=100-(_.price-n)/k*100})}return l});async function xe(){var R;if(!((R=e().product)!=null&&R.auctionEndDate))return;const l=new Date().getTime(),n=new Date(e().product.auctionEndDate).getTime()-l;if(n<0){if(r(zt,"Auction Ended"),t(wt)&&clearInterval(t(wt)),(e().product.status==="active"||e().product.status==="available")&&t($t)&&t(V))try{await li(e().product.id,{status:"sold"}),window.location.reload()}catch(A){console.error("Error auto-closing auction:",A)}else if((e().product.status==="active"||e().product.status==="available")&&t($t)&&!t(V))try{await li(e().product.id,{status:"ended"}),window.location.reload()}catch(A){console.error("Error auto-closing auction:",A)}return}const v=Math.floor(n/(1e3*60*60*24)),k=Math.floor(n%(1e3*60*60*24)/(1e3*60*60)),_=Math.floor(n%(1e3*60*60)/(1e3*60)),Y=Math.floor(n%(1e3*60)/1e3);v>0?r(zt,`${v}d ${k}h ${_}m ${Y}s`):k>0?r(zt,`${k}h ${_}m ${Y}s`):r(zt,`${_}m ${Y}s`)}ge(()=>{var l;(l=e().product)!=null&&l.auctionEndDate&&(xe(),t(wt)||r(wt,setInterval(xe,1e3),!0))});async function _e(){if(!(!e().product||t(St)))try{const l=await is(e().product.id);if(!l)return;const o=l.updatedAt!==t(W).updatedAt,n=l.latestBidTime!==t(W).latestBidTime,v=l.bidCount!==t(W).bidCount,k=l.status!==t(W).status,_=l.currentBid!==t(W).currentBid;if(o||n||v||k||_){if(r(St,!0),o||k||_){const Y=await ui(e().product.id);Y&&(e().product=Y)}if(n||v){const Y=await Le(e().product.id),R=new Set(t(vt).map(A=>A.id));r(jt,new Set(Y.filter(A=>!R.has(A.id)).map(A=>A.id)),!0),r(vt,[...Y],!0),e().bids=Y,t(jt).size>0&&P(()=>{r(jt,new Set,!0)},3e3)}_&&(r(Gt,!0),r(fe,!0),P(()=>{r(Gt,!1)},1e3),P(()=>{r(fe,!1)},3e3)),r(W,{updatedAt:l.updatedAt,latestBidTime:l.latestBidTime||"",bidCount:l.bidCount,status:l.status,currentBid:l.currentBid},!0),e().product&&localStorage.setItem(`product_${e().product.id}_state`,JSON.stringify(t(W))),e({...e()}),r(St,!1)}}catch(l){console.error("Error checking for updates:",l),r(St,!1)}}async function hi(){await _e()}async function gi(l){try{r(pe,!0);const o=await Qi(l,"received");r(Et,ts(o),!0);const n=await es(l,{status:"sold"});r(ae,n.totalDocs,!0)}catch(o){console.error("Error loading seller data:",o)}finally{r(pe,!1)}}pi(()=>{var v,k,_,Y;const l=localStorage.getItem(`product_${(v=e().product)==null?void 0:v.id}_state`);if(l)try{const R=JSON.parse(l);r(W,R,!0)}catch(R){console.error("Error parsing saved state:",R)}const o=localStorage.getItem("bid_censor_name");if(o!==null&&r(ct,o==="true"),(_=(k=e().product)==null?void 0:k.seller)!=null&&_.id&&gi(e().product.seller.id),(Y=e().product)!=null&&Y.id){const R=gs(String(e().product.id));R.connect();const A=R.subscribe(async J=>{if(J.type==="bid"&&J.success){const H=J;if(e().product&&H.amount){const Pt=H.amount,K=e().product.currentBid||e().product.startingPrice;if(Pt>K){if(r(Gt,!0),e().product.currentBid=Pt,H.bidId&&H.bidderId){const O={id:String(H.bidId),amount:H.amount,bidTime:H.bidTime||new Date().toISOString(),censorName:H.censorName||!1,bidder:{id:String(H.bidderId),name:H.bidderName||"Anonymous",email:""},product:e().product.id};r(jt,new Set([String(H.bidId)]),!0),e().bids=[O,...e().bids]}r(ot,(e().product.currentBid||e().product.startingPrice||0)+t(it)),t(I)<t(ot)&&r(I,t(ot),!0),P(()=>{r(Gt,!1),r(jt,new Set,!0)},3e3),e({...e()})}}}else J.type==="accepted"&&e().product&&J.success&&(e().product.status="sold",r(st,!1),r(Vt,!0),e({...e()}),P(()=>{r(Vt,!1)},3e3))});window.__sseUnsubscribe=A}r(Tt,setInterval(()=>{_e()},1e4),!0),_e();const n=()=>{var R;document.hidden?(t(Tt)&&(clearInterval(t(Tt)),r(Tt,null)),t(wt)&&(clearInterval(t(wt)),r(wt,null))):(t(Tt)||(_e(),r(Tt,setInterval(()=>{_e()},1e4),!0)),!t(wt)&&((R=e().product)!=null&&R.auctionEndDate)&&(xe(),r(wt,setInterval(xe,1e3),!0)))};return document.addEventListener("visibilitychange",n),()=>{document.removeEventListener("visibilitychange",n)}}),as(()=>{var l;t(wt)&&clearInterval(t(wt)),t(Tt)&&clearInterval(t(Tt)),yt.forEach(o=>clearTimeout(o)),yt=[],(l=e().product)!=null&&l.id&&bs(String(e().product.id)),window.__sseUnsubscribe&&window.__sseUnsubscribe()});function lt(l,o="PHP"){return new Intl.NumberFormat("en-US",{style:"currency",currency:o}).format(l)}let at=_t(()=>{var l,o;return((o=(l=e().product)==null?void 0:l.seller)==null?void 0:o.currency)||"PHP"});function Ye(l){return new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function bi(){r(I,t(I)+t(it))}function wi(){const l=t(I)-t(it);l>=t(ot)&&r(I,l)}function yi(){var n,v;if(!t(I)||t(I)<t(ot)){r(I,t(ot),!0),r(bt,`Bid amount adjusted to minimum: ${lt(t(ot),t(at))}`),P(()=>r(bt,""),3e3);return}const l=((n=e().product)==null?void 0:n.currentBid)||((v=e().product)==null?void 0:v.startingPrice)||0,o=t(I)-l;if(o%t(it)!==0){const k=o%t(it),_=t(it)-k;r(I,t(I)+_),r(bt,`Bid amount must be in increments of ${lt(t(it),t(at))}. Adjusted to ${lt(t(I),t(at))}`),P(()=>r(bt,""),3e3)}}function xi(){if(!e().product)return;if(!pt().isAuthenticated){r(ve,!0);return}const l=e().product.currentBid||e().product.startingPrice,o=l+t(it);if(t(I)<o){r(bt,`Your bid must be at least ${lt(o,t(at))} (current highest: ${lt(l,t(at))})`);return}r(bt,""),r(le,!0)}async function Bi(){if(e().product){r(le,!1),r(gt,!0),r(bt,""),r(Rt,!1);try{const l=await ws(e().product.id,t(I),t(ct));if(l.success){if(r(Rt,!0),r(bt,""),l.fallback||l.bidId){r(Gt,!0),r(fe,!0);const o=await Le(e().product.id),n=new Set(e().bids.map(v=>v.id));r(jt,new Set(o.filter(v=>!n.has(v.id)).map(v=>v.id)),!0),e().bids=o,e().product&&(e().product.currentBid=t(I))}r(I,t(I)+t(it)),P(()=>{r(Gt,!1)},1e3),P(()=>{r(fe,!1)},3e3),P(()=>{r(jt,new Set,!0)},3e3),P(()=>{hi()},500),P(()=>{r(Rt,!1)},5e3)}else r(bt,l.error||"Failed to place bid. Please try again.",!0)}catch(l){console.error("Error in confirmPlaceBid:",l),r(bt,"An error occurred while placing your bid.")}finally{r(gt,!1)}}}function Te(){r(le,!1)}function Si(){r(Rt,!1)}function Ue(l){return l.split(" ").map(o=>{if(o.length===0)return"";const n=o.charAt(0).toUpperCase(),v="*".repeat(o.length-1);return n+v}).join(" ")}function Be(l){const o=typeof l.bidder=="object"?l.bidder.name:"Anonymous";return l.censorName?Ue(o):o}function Ne(){r(ve,!1)}let $t=_t(()=>{var l,o,n;return((l=pt().user)==null?void 0:l.id)&&((n=(o=e().product)==null?void 0:o.seller)==null?void 0:n.id)&&pt().user.id===e().product.seller.id}),V=_t(()=>t(Ot).length>0?t(Ot)[0]:null),je=_t(()=>{var l;return((l=pt().user)==null?void 0:l.id)&&t(V)&&(typeof t(V).bidder=="object"?t(V).bidder.id:t(V).bidder)===pt().user.id});function Pi(){e().product&&r(ue,!0)}function $e(){r(ue,!1)}function ki(l){e().product&&(e().product={...l,seller:e().product.seller},r(ot,(e().product.currentBid||e().product.startingPrice||0)+t(it)),t(I)<t(ot)&&r(I,t(ot),!0)),P(()=>{$e()},1500)}function Ai(){r(st,!0),r(Lt,""),r(Vt,!1)}function He(){r(st,!1)}async function Ci(){if(!(!e().product||!t(V))){r(ht,!0),r(Lt,""),r(Vt,!1);try{const l=localStorage.getItem("auth_token");if(!l){r(Lt,"You must be logged in to accept a bid."),r(ht,!1);return}const n=await(await fetch("/api/bridge/bid/accept",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`JWT ${l}`},body:JSON.stringify({productId:e().product.id})})).json();n.success?r(st,!1):(console.error("Failed to accept bid:",n.error),r(Lt,n.error||"Failed to accept bid. Please try again.",!0))}catch(l){console.error("Error accepting bid:",l),r(Lt,"An error occurred while accepting the bid: "+(l instanceof Error?l.message:String(l)))}finally{r(ht,!1)}}}var Oe=Rl();vs("9lltit",l=>{var o=Hs(),n=a(Wt(o),2),v=a(n,2),k=a(v,2),_=a(k,2);{var Y=K=>{var O=Ns();w(()=>F(O,"content",e().product.images[0].image.url)),c(K,O)};h(_,K=>{var O;(O=e().product)!=null&&O.images&&e().product.images.length>0&&e().product.images[0].image&&K(Y)})}var R=a(_,4),A=a(R,2),J=a(A,2),H=a(J,2);{var Pt=K=>{var O=js();w(()=>F(O,"content",e().product.images[0].image.url)),c(K,O)};h(H,K=>{var O;(O=e().product)!=null&&O.images&&e().product.images.length>0&&e().product.images[0].image&&K(Pt)})}w(()=>{var K,O,Nt,kt,At,It;F(n,"content",`https://bidmo.to/products/${((K=e().product)==null?void 0:K.id)||""}`),F(v,"content",((O=e().product)==null?void 0:O.title)||"Product"),F(k,"content",((Nt=e().product)==null?void 0:Nt.description)||"Check out this product on BidMo.to"),F(R,"content",`https://bidmo.to/products/${((kt=e().product)==null?void 0:kt.id)||""}`),F(A,"content",((At=e().product)==null?void 0:At.title)||"Product"),F(J,"content",((It=e().product)==null?void 0:It.description)||"Check out this product on BidMo.to")}),rs(()=>{var K;os.title=`${(((K=e().product)==null?void 0:K.title)||"Product")??""} - BidMo.to`}),c(l,o)});var ze=Wt(Oe);{var Ei=l=>{var o=Os(),n=a(s(o),4),v=s(n,!0);i(n),i(o),w(()=>{F(n,"href",t(ie)),u(v,t(se))}),c(l,o)},Mi=l=>{var o=Sl(),n=s(o),v=s(n),k=s(v);i(v);var _=a(v,2);{var Y=d=>{var p=zs();dt("click",p,Pi),c(d,p)};h(_,d=>{t($t)&&d(Y)})}i(n);var R=a(n,2),A=s(R),J=s(A);{let d=_t(()=>e().product.status==="active");Us(J,{get bidCount(){return e().bids.length},get isActive(){return t(d)},get currentBid(){return e().product.currentBid},get startingPrice(){return e().product.startingPrice}})}var H=a(J,2),Pt=s(H),K=s(Pt,!0);i(Pt);var O=a(Pt,2);let Nt;i(H);var kt=a(H,2),At=s(kt,!0);i(kt);var It=a(kt,2);{let d=_t(()=>e().product.images||[]);hs(It,{get images(){return t(d)},get productTitle(){return e().product.title}})}var Ft=a(It,2),Kt=a(s(Ft),2),Zt=s(Kt,!0);i(Kt),i(Ft);var Xt=a(Ft,2);{var re=d=>{var p=Fs(),$=a(s(p),2),j=s($),nt=a(s(j),6),B=a(nt),y=a(B);ke(y,17,()=>t(Ut),De,(f,M,X)=>{var rt=Gs();let N;w(()=>{F(rt,"cx",t(M).x),F(rt,"cy",t(M).y),N=Bt(rt,0,"data-point svelte-9lltit",null,N,{"first-point":X===0,"last-point":X===t(Ut).length-1})}),c(f,rt)}),i(j);var L=a(j,2),z=s(L),x=a(s(z),2),g=s(x,!0);i(x),i(z);var b=a(z,2),C=s(b),U=s(C);i(C),i(b);var S=a(b,2),q=a(s(S),2),E=s(q,!0);i(q),i(S),i(L),i($),i(p),w((f,M,X,rt)=>{F(nt,"d",`M 0,100 ${f??""} L 100,100 Z`),F(B,"points",M),u(g,X),u(U,`${t(Ut).length??""} Bid${t(Ut).length!==1?"s":""}`),u(E,rt)},[()=>t(Ut).map(f=>`L ${f.x},${f.y}`).join(" "),()=>t(Ut).map(f=>`${f.x},${f.y}`).join(" "),()=>{var f,M;return lt(((f=e().product)==null?void 0:f.startingPrice)||((M=t(Ut)[0])==null?void 0:M.price)||0,t(at))},()=>{var f;return lt(((f=t(Ut)[t(Ut).length-1])==null?void 0:f.price)||0,t(at))}]),c(d,p)};h(Xt,d=>{t(Ot).length>0&&t(Ut).length>0&&d(re)})}var Z=a(Xt,2),mt=a(s(Z),2),Dt=s(mt),ft=s(Dt),xt=s(ft,!0);i(ft);var oe=a(ft,2),Qt=s(oe),Yi=s(Qt,!0);i(Qt);var Ui=a(Qt,2);{var Ni=d=>{var p=Ws(),$=s(p);i(p),w(j=>u($,`Member since ${j??""}`),[()=>new Date(e().product.seller.createdAt).toLocaleDateString("en-US",{month:"short",year:"numeric"})]),c(d,p)};h(Ui,d=>{var p;(p=e().product.seller)!=null&&p.createdAt&&d(Ni)})}i(oe),i(Dt);var Ie=a(Dt,2),ji=s(Ie);{var Hi=d=>{var p=Vs();c(d,p)},Oi=d=>{var p=qs(),$=Wt(p),j=a(s($),2),nt=s(j);{let N=_t(()=>{var Q,G;return((G=(Q=t(Et))==null?void 0:Q.asSeller)==null?void 0:G.averageRating)||0});oi(nt,{get rating(){return t(N)},size:"small"})}var B=a(nt,2),y=s(B,!0);i(B),i(j);var L=a(j,2),z=s(L);i(L),i($);var x=a($,4),g=a(s(x),2),b=s(g);{let N=_t(()=>{var Q,G;return((G=(Q=t(Et))==null?void 0:Q.asBuyer)==null?void 0:G.averageRating)||0});oi(b,{get rating(){return t(N)},size:"small"})}var C=a(b,2),U=s(C,!0);i(C),i(g);var S=a(g,2),q=s(S);i(S),i(x);var E=a(x,4),f=s(E),M=s(f,!0);i(f);var X=a(f,2),rt=s(X);i(X),i(E),w((N,Q)=>{var G,tt,et,ut,Ht,ne,Se,he;u(y,N),u(z,`${(((tt=(G=t(Et))==null?void 0:G.asSeller)==null?void 0:tt.totalRatings)||0)??""} rating${(((ut=(et=t(Et))==null?void 0:et.asSeller)==null?void 0:ut.totalRatings)||0)!==1?"s":""}`),u(U,Q),u(q,`${(((ne=(Ht=t(Et))==null?void 0:Ht.asBuyer)==null?void 0:ne.totalRatings)||0)??""} rating${(((he=(Se=t(Et))==null?void 0:Se.asBuyer)==null?void 0:he.totalRatings)||0)!==1?"s":""}`),u(M,t(ae)),u(rt,`sale${t(ae)!==1?"s":""}`)},[()=>{var N,Q;return(((Q=(N=t(Et))==null?void 0:N.asSeller)==null?void 0:Q.averageRating)||0).toFixed(1)},()=>{var N,Q;return(((Q=(N=t(Et))==null?void 0:N.asBuyer)==null?void 0:Q.averageRating)||0).toFixed(1)}]),c(d,p)};h(ji,d=>{t(pe)?d(Hi):d(Oi,!1)})}i(Ie);var Ze=a(Ie,2);{var zi=d=>{var p=Js(),$=a(s(p),2),j=s($);i($),i(p),w(()=>u(j,`${e().product.city??""}${e().product.city&&e().product.region?", ":""}${e().product.region??""}`)),c(d,p)};h(Ze,d=>{(e().product.region||e().product.city)&&d(zi)})}var Gi=a(Ze,2);i(mt),i(Z),i(A);var Xe=a(A,2),Qe=s(Xe);{var Fi=d=>{var p=Ks();c(d,p)};h(Qe,d=>{e().product.active||d(Fi)})}var ti=a(Qe,2);{var Wi=d=>{var p=al(),$=s(p);{var j=x=>{var g=Xs();ke(g,20,()=>Array(50),De,(b,C,U)=>{var S=Zs();w(()=>Re(S,`--delay: ${U*.02}s; --x: ${Math.random()*100}%; --rotation: ${Math.random()*360}deg; --color: ${["#000","#525252","#E5E5E5","#000","#525252","#E5E5E5"][U%6]??""}`)),c(b,S)}),i(g),c(x,g)};h($,x=>{t(fe)&&x(j)})}var nt=a($,2);{var B=x=>{var g=Qs(),b=a(s(g),2),C=s(b,!0);i(b),i(g),w(()=>u(C,t(zt)||"Loading...")),c(x,g)};h(nt,x=>{(e().product.status==="active"||e().product.status==="available")&&e().product.status!=="sold"&&!t(Mt)&&x(B)})}var y=a(nt,2);{var L=x=>{var g=il();let b;var C=s(g),U=s(C);let S;i(C);var q=a(C,2),E=s(q);let f;var M=s(E,!0);i(E);var X=a(E,2);{var rt=et=>{var ut=tl(),Ht=a(s(ut),2),ne=s(Ht);i(Ht),i(ut),w(()=>u(ne,`${t(me)??""}%`)),c(et,ut)};h(X,et=>{e().product.currentBid&&e().product.currentBid>e().product.startingPrice&&et(rt)})}i(q);var N=a(q,2),Q=s(N);i(N);var G=a(N,2);{var tt=et=>{var ut=el(),Ht=s(ut),ne=s(Ht,!0);i(Ht);var Se=a(Ht,2);let he;i(ut),w(()=>{F(ut,"aria-label",t(D)?"Hide bid form":"Show bid form"),u(ne,t(D)?"Close":"Place Bid"),he=Bt(Se,0,"svelte-9lltit",null,he,{"chevron-up":t(D)})}),dt("click",ut,()=>r(D,!t(D))),c(et,ut)};h(G,et=>{t($t)||et(tt)})}i(g),w((et,ut)=>{b=Bt(g,1,"highest-bid-container svelte-9lltit",null,b,{expanded:t(D)&&!t($t)}),S=Bt(U,1,"highest-bid-label svelte-9lltit",null,S,{"label-pulse":t(Gt)}),f=Bt(E,1,"highest-bid-amount svelte-9lltit",null,f,{"price-animate":t(Gt)}),u(M,et),u(Q,`Starting price: ${ut??""}`)},[()=>lt(e().product.currentBid,t(at)),()=>lt(e().product.startingPrice,t(at))]),c(x,g)},z=x=>{var g=ll();let b;var C=a(s(g),2),U=s(C,!0);i(C);var S=a(C,4);{var q=E=>{var f=sl(),M=s(f),X=s(M,!0);i(M);var rt=a(M,2);let N;i(f),w(()=>{F(f,"aria-label",t(D)?"Hide bid form":"Show bid form"),u(X,t(D)?"Close":"Place Bid"),N=Bt(rt,0,"svelte-9lltit",null,N,{"chevron-up":t(D)})}),dt("click",f,()=>r(D,!t(D))),c(E,f)};h(S,E=>{t($t)||E(q)})}i(g),w(E=>{b=Bt(g,1,"highest-bid-container svelte-9lltit",null,b,{expanded:t(D)&&!t($t)}),u(U,E)},[()=>lt(e().product.startingPrice,t(at))]),c(x,g)};h(y,x=>{e().product.currentBid&&!t(Mt)&&e().product.status!=="ended"&&e().product.status!=="sold"?x(L):!t(Mt)&&e().product.status!=="ended"&&x(z,1)})}i(p),c(d,p)};h(ti,d=>{!t($t)&&!t(Mt)&&e().product.status!=="sold"&&d(Wi)})}var ei=a(ti,2);{var Vi=d=>{var p=Ae(),$=Wt(p);{var j=B=>{var y=nl(),L=s(y),z=a(s(L),2),x=a(s(z),2),g=s(x,!0);i(x),i(z),i(L);var b=a(L,2);{var C=S=>{var q=rl(),E=Wt(q),f=a(s(E),2),M=s(f,!0);i(f);var X=a(f,2),rt=s(X);i(X),i(E);var N=a(E,2);w((Q,G)=>{u(M,Q),u(rt,`by ${G??""}`)},[()=>lt(t(V).amount,t(at)),()=>Be(t(V))]),dt("click",N,Ai),c(S,q)},U=S=>{var q=ol();c(S,q)};h(b,S=>{t(V)?S(C):S(U,!1)})}i(y),w(()=>u(g,t(zt)||"Loading...")),c(B,y)},nt=B=>{var y=vl();let L;var z=s(y),x=a(s(z),2);{var g=tt=>{var et=dl();c(tt,et)};h(x,tt=>{pt().isAuthenticated||tt(g)})}var b=a(x,2);{var C=tt=>{var et=cl(),ut=s(et,!0);i(et),w(()=>u(ut,t(bt))),c(tt,et)};h(b,tt=>{t(bt)&&tt(C)})}var U=a(b,2),S=s(U),q=a(s(S),2),E=s(q),f=s(E),M=a(f,2);ai(M);var X=a(M,2);i(E);var rt=a(E,2),N=s(rt,!0);i(rt),i(q);var Q=a(q,2),G=s(Q);i(Q),i(S),i(U),i(z),i(y),w((tt,et)=>{L=Bt(y,1,"bid-section svelte-9lltit",null,L,{"bid-section-open":t(D),"bid-section-closed":!t(D)}),f.disabled=t(gt)||t(I)<=t(ot),F(M,"min",t(ot)),F(M,"step",t(it)),M.disabled=t(gt),X.disabled=t(gt),rt.disabled=t(gt),u(N,t(gt)?"Placing Bid...":"Place Bid"),u(G,`Minimum bid: ${tt??""} ‚Ä¢ Increment: ${et??""}`)},[()=>lt(t(ot),t(at)),()=>lt(t(it),t(at))]),dt("click",f,wi),ds("blur",M,yi),ps(M,()=>t(I),tt=>r(I,tt)),dt("click",X,bi),dt("click",rt,xi),c(B,y)};h($,B=>{t($t)?B(j):B(nt,!1)})}c(d,p)},qi=d=>{var p=fl(),$=a(s(p),2);{var j=B=>{var y=pl(),L=a(s(y),2),z=s(L),x=s(z,!0);i(z);var g=a(z,2);{var b=E=>{var f=ul(),M=a(s(f),2),X=s(M);i(M),i(f),w(()=>u(X,`${t(me)??""}%`)),c(E,f)};h(g,E=>{t(V).amount>e().product.startingPrice&&E(b)})}i(L);var C=a(L,2),U=s(C);i(C);var S=a(C,2),q=s(S);i(S),i(y),w((E,f,M)=>{u(x,E),u(U,`Winner: ${f??""}`),u(q,`Starting price: ${M??""}`)},[()=>lt(t(V).amount,t(at)),()=>Be(t(V)),()=>lt(e().product.startingPrice,t(at))]),c(B,y)},nt=B=>{var y=ml(),L=a(s(y),6),z=s(L);i(L),i(y),w(x=>u(z,`Starting price was: ${x??""}`),[()=>lt(e().product.startingPrice,t(at))]),c(B,y)};h($,B=>{t(V)?B(j):B(nt,!1)})}i(p),c(d,p)};h(ei,d=>{(e().product.status==="active"||e().product.status==="available")&&!t(Mt)?d(Vi):(t(Mt)||e().product.status==="ended"||e().product.status==="sold")&&d(qi,1)})}var ii=a(ei,2);{var Ji=d=>{var p=Ae(),$=Wt(p);{var j=B=>{var y=Ae(),L=Wt(y);{var z=g=>{var b=_l();let C;var U=a(s(b),2),S=s(U,!0);i(U),i(b),w(()=>{C=Bt(b,1,"highest-bidder-alert svelte-9lltit",null,C,{"animate-in":!t(qt)}),u(S,t(Jt)||"You're currently the highest bidder!")}),c(g,b)},x=g=>{var b=hl();let C;var U=a(s(b),2),S=s(U,!0);i(U),i(b),w(()=>{C=Bt(b,1,"outbid-alert svelte-9lltit",null,C,{shake:t(Ee)}),u(S,t(Jt))}),c(g,b)};h(L,g=>{t(je)?g(z):t(qt)&&g(x,1)})}c(B,y)},nt=B=>{var y=gl(),L=a(s(y),4);i(y),w(()=>F(L,"href",`/inbox?product=${e().product.id??""}`)),c(B,y)};h($,B=>{(e().product.status==="active"||e().product.status==="available")&&!t(Mt)?B(j):(t(Mt)||e().product.status==="ended"||e().product.status==="sold")&&B(nt,1)})}c(d,p)};h(ii,d=>{(t(je)||t(qt))&&!t($t)&&d(Ji)})}var si=a(ii,2);{var Ki=d=>{var p=bl(),$=s(p);i(p),w(()=>F($,"href",`/inbox?product=${e().product.id??""}`)),c(d,p)};h(si,d=>{pt().isAuthenticated&&t($t)&&t(V)&&e().product.status==="sold"&&d(Ki)})}var Zi=a(si,2);{var Xi=d=>{var p=Bl(),$=a(s(p),2);ke($,23,()=>t(Ot).slice(0,10),j=>j.id,(j,nt,B)=>{var y=xl();let L;var z=s(y);{var x=G=>{var tt=wl();c(G,tt)},g=_t(()=>t(jt).has(t(nt).id));h(z,G=>{t(g)&&G(x)})}var b=a(z,2),C=s(b);i(b);var U=a(b,2),S=s(U),q=s(S,!0);i(S);var E=a(S,2),f=s(E),M=s(f,!0);i(f);var X=a(f,2),rt=s(X,!0);i(X),i(E),i(U);var N=a(U,2);{var Q=G=>{var tt=yl();c(G,tt)};h(N,G=>{t(B)===0&&G(Q)})}i(y),w((G,tt,et,ut)=>{L=Bt(y,1,"bid-history-item svelte-9lltit",null,L,G),Re(y,`--rank: ${t(B)+1}; --delay: ${t(B)*.05}s`),u(C,`#${t(B)+1}`),u(q,tt),u(M,et),u(rt,ut)},[()=>({"rank-1":t(B)===0,"new-bid":t(jt).has(t(nt).id)}),()=>lt(t(nt).amount,t(at)),()=>Be(t(nt)),()=>Ye(t(nt).bidTime)]),c(j,y)}),i($),i(p),c(d,p)};h(Zi,d=>{t(Ot).length>0&&d(Xi)})}i(Xe),i(R),i(o),w(d=>{var p,$,j;F(v,"href",t(ie)),u(k,`‚Üê ${t(se)??""}`),u(K,e().product.title),Nt=Bt(O,1,"live-indicator svelte-9lltit",null,Nt,{updating:t(St),connected:Yt==="connected"}),Bt(kt,1,`status-badge status-${e().product.status??""}`,"svelte-9lltit"),u(At,e().product.status),u(Zt,e().product.description),u(xt,d),F(Qt,"href",`/users/${((p=e().product.seller)==null?void 0:p.id)??""}`),u(Yi,(($=e().product.seller)==null?void 0:$.name)||"Unknown"),F(Gi,"href",`/users/${((j=e().product.seller)==null?void 0:j.id)??""}`)},[()=>{var d,p,$;return(($=(p=(d=e().product.seller)==null?void 0:d.name)==null?void 0:p.charAt(0))==null?void 0:$.toUpperCase())||"?"}]),c(l,o)};h(ze,l=>{e().product?l(Mi,!1):l(Ei)})}var Ge=a(ze,2);{var Ti=l=>{var o=Al(),n=s(o),v=s(n),k=a(v,4),_=s(k),Y=s(_),R=s(Y,!0);i(Y);var A=a(Y,2),J=s(A),H=a(s(J),2),Pt=s(H,!0);i(H),i(J);var K=a(J,2);{var O=Z=>{var mt=Pl(),Dt=a(s(mt),2),ft=s(Dt,!0);i(Dt),i(mt),w(xt=>u(ft,xt),[()=>lt(e().product.currentBid,t(at))]),c(Z,mt)},Nt=Z=>{var mt=kl(),Dt=a(s(mt),2),ft=s(Dt,!0);i(Dt),i(mt),w(xt=>u(ft,xt),[()=>lt(e().product.startingPrice,t(at))]),c(Z,mt)};h(K,Z=>{e().product.currentBid?Z(O):Z(Nt,!1)})}i(A);var kt=a(A,4),At=s(kt),It=s(At);ai(It),Pe(2),i(At);var Ft=a(At,2),Kt=s(Ft,!0);i(Ft),i(kt),i(_);var Zt=a(_,2),Xt=s(Zt),re=a(Xt,2);i(Zt),i(k),i(n),i(o),w((Z,mt)=>{u(R,e().product.title),u(Pt,Z),u(Kt,mt)},[()=>lt(t(I),t(at)),()=>{var Z;return t(ct)?`Your name will appear as: ${Ue(((Z=pt().user)==null?void 0:Z.name)||"Your Name")}`:"Your full name will be visible in bid history"}]),dt("click",o,Te),dt("click",n,Z=>Z.stopPropagation()),dt("click",v,Te),us(It,()=>t(ct),Z=>r(ct,Z)),dt("click",Xt,Te),dt("click",re,Bi),c(l,o)};h(Ge,l=>{t(le)&&e().product&&l(Ti)})}var Fe=a(Ge,2);{var $i=l=>{var o=Ml(),n=s(o),v=s(n),k=a(v,4),_=s(k);{var Y=ft=>{var xt=Cl();c(ft,xt)};h(_,ft=>{t(Vt)&&ft(Y)})}var R=a(_,2);{var A=ft=>{var xt=El(),oe=s(xt,!0);i(xt),w(()=>u(oe,t(Lt))),c(ft,xt)};h(R,ft=>{t(Lt)&&ft(A)})}var J=a(R,2),H=s(J),Pt=s(H,!0);i(H);var K=a(H,2),O=s(K),Nt=a(s(O),2),kt=s(Nt,!0);i(Nt),i(O);var At=a(O,2),It=a(s(At),2),Ft=s(It,!0);i(It),i(At);var Kt=a(At,2),Zt=a(s(Kt),2),Xt=s(Zt,!0);i(Zt),i(Kt),i(K),Pe(2),i(J);var re=a(J,2),Z=s(re),mt=a(Z,2),Dt=s(mt,!0);i(mt),i(re),i(k),i(n),i(o),w((ft,xt,oe)=>{var Qt;u(Pt,(Qt=e().product)==null?void 0:Qt.title),u(kt,ft),u(Ft,xt),u(Xt,oe),Z.disabled=t(ht),mt.disabled=t(ht),u(Dt,t(ht)?"Accepting...":"Accept Bid & Close")},[()=>lt(t(V).amount,t(at)),()=>Be(t(V)),()=>Ye(t(V).bidTime)]),dt("click",v,He),dt("click",Z,He),dt("click",mt,Ci),c(l,o)};h(Fe,l=>{t(st)&&t(V)&&l($i)})}var We=a(Fe,2);{var Ii=l=>{var o=$l(),n=s(o);ke(n,20,()=>Array(20),De,(_,Y,R)=>{var A=Tl();w(()=>Re(A,`--i: ${R}; --x: ${Math.random()*100}%; --delay: ${Math.random()*.5}s; --color: ${["#000","#525252","#E5E5E5","#000","#525252","#E5E5E5","#000","#525252"][R%8]??""}`)),c(_,A)}),i(n);var v=a(n,2),k=a(s(v),4);i(v),Pe(2),i(o),dt("click",k,Si),c(l,o)};h(We,l=>{t(Rt)&&l(Ii)})}var Ve=a(We,2);{var Di=l=>{var o=Il(),n=s(o),v=s(n),k=a(v,4),_=a(s(k),2),Y=s(_),R=a(Y,2);i(_),Pe(2),i(k),i(n),i(o),w(()=>{var A,J;F(Y,"href",`/login?redirect=/products/${((A=e().product)==null?void 0:A.id)??""}`),F(R,"href",`/register?redirect=/products/${((J=e().product)==null?void 0:J.id)??""}`)}),dt("click",o,Ne),dt("click",n,A=>A.stopPropagation()),dt("click",v,Ne),c(l,o)};h(Ve,l=>{t(ve)&&l(Di)})}var Ri=a(Ve,2);{var Li=l=>{var o=Dl(),n=s(o),v=s(n),k=a(v,4),_=s(k);_s(_,{mode:"edit",get product(){return e().product},onSuccess:ki,onCancel:$e}),i(k),i(n),i(o),dt("click",v,$e),c(l,o)};h(Ri,l=>{t(ue)&&l(Li)})}c(ee,Oe),fi(),ce()}ns(["click"]);export{oa as component,ra as universal};
