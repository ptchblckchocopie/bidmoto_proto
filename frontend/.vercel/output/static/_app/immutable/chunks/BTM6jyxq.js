var F=Object.defineProperty;var I=a=>{throw TypeError(a)};var M=(a,e,t)=>e in a?F(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var A=(a,e,t)=>M(a,typeof e!="symbol"?e+"":e,t),T=(a,e,t)=>e.has(a)||I("Cannot "+t);var s=(a,e,t)=>(T(a,e,"read from private field"),t?t.call(a):e.get(a)),d=(a,e,t)=>e.has(a)?I("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t),w=(a,e,t,r)=>(T(a,e,"write to private field"),r?r.call(a,t):e.set(a,t),t);import{k as N,af as O,al as k,ag as x,T as R,a7 as E,h as b,a2 as H,aG as Y,a9 as y,U as B,Y as C,aH as J,Z as G,aI as L,_ as P,a0 as U,W,a1 as D,w as Z}from"./Cl0DMWZv.js";var l,u,h,_,g,v,S;class j{constructor(e,t=!0){A(this,"anchor");d(this,l,new Map);d(this,u,new Map);d(this,h,new Map);d(this,_,new Set);d(this,g,!0);d(this,v,()=>{var e=N;if(s(this,l).has(e)){var t=s(this,l).get(e),r=s(this,u).get(t);if(r)O(r),s(this,_).delete(t);else{var o=s(this,h).get(t);o&&(s(this,u).set(t,o.effect),s(this,h).delete(t),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[n,i]of s(this,l)){if(s(this,l).delete(n),n===e)break;const c=s(this,h).get(i);c&&(k(c.effect),s(this,h).delete(i))}for(const[n,i]of s(this,u)){if(n===t||s(this,_).has(n))continue;const c=()=>{if(Array.from(s(this,l).values()).includes(n)){var m=document.createDocumentFragment();Y(i,m),m.append(R()),s(this,h).set(n,{effect:i,fragment:m})}else k(i);s(this,_).delete(n),s(this,u).delete(n)};s(this,g)||!r?(s(this,_).add(n),x(i,c,!1)):c()}}});d(this,S,e=>{s(this,l).delete(e);const t=Array.from(s(this,l).values());for(const[r,o]of s(this,h))t.includes(r)||(k(o.effect),s(this,h).delete(r))});this.anchor=e,w(this,g,t)}ensure(e,t){var r=N,o=y();if(t&&!s(this,u).has(e)&&!s(this,h).has(e))if(o){var n=document.createDocumentFragment(),i=R();n.append(i),s(this,h).set(e,{effect:E(()=>t(i)),fragment:n})}else s(this,u).set(e,E(()=>t(this.anchor)));if(s(this,l).set(r,e),o){for(const[c,f]of s(this,u))c===e?r.unskip_effect(f):r.skip_effect(f);for(const[c,f]of s(this,h))c===e?r.unskip_effect(f.effect):r.skip_effect(f.effect);r.oncommit(s(this,v)),r.ondiscard(s(this,S))}else b&&(this.anchor=H),s(this,v).call(this)}}l=new WeakMap,u=new WeakMap,h=new WeakMap,_=new WeakMap,g=new WeakMap,v=new WeakMap,S=new WeakMap;function Q(a,e,t=!1){b&&C();var r=new j(a),o=t?J:0;function n(i,c){if(b){const p=G(a);var f;if(p===L?f=0:p===P?f=!1:f=parseInt(p.substring(1)),i!==f){var m=U();W(m),r.anchor=m,D(!1),r.ensure(i,c),D(!0);return}}r.ensure(i,c)}B(()=>{var i=!1;e((c,f=0)=>{i=!0,n(f,c)}),i||n(!1,null)},o)}function q(){const a={isAuthenticated:!1,user:null,token:null};{const o=localStorage.getItem("auth_token"),n=localStorage.getItem("user_data");if(o&&n)try{const i=JSON.parse(n);a.isAuthenticated=!0,a.user=i,a.token=o}catch{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data")}}const{subscribe:e,set:t,update:r}=Z(a);return{subscribe:e,set:o=>{o.isAuthenticated&&o.token?(localStorage.setItem("auth_token",o.token),o.user&&localStorage.setItem("user_data",JSON.stringify(o.user))):(localStorage.removeItem("auth_token"),localStorage.removeItem("user_data")),t(o)},update:r,logout:()=>{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),t({isAuthenticated:!1,user:null,token:null})}}}const V=q();function X(){return localStorage.getItem("auth_token")}export{j as B,V as a,X as g,Q as i};
